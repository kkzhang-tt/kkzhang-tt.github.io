<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <title>Google File System</title>
  <link rel="icon" href="https://raw.githubusercontent.com/kkzhang-tt/kkzhang-tt.github.io/main/_images/logo.ico" type="image/x-icon">
  <meta name='description' content="0-Keywords">
  <link rel='canonical' href="kkzhang-tt.github.io/2021/07/29/gfs/">
  <link rel='alternate' type='application/rss+xml' title='Find a needle in haystack' href="kkzhang-tt.github.io/feed.xml">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Volkhov:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">

  <style>
    
    /*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:0.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,dl,dd,ol,ul,fieldset,legend,figure,hr{margin:0;padding:0}li>ul,li>ol{margin-bottom:0}table{border-collapse:collapse;border-spacing:0}@-webkit-keyframes spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.icon{position:relative;display:inline-block;width:25px;height:25px;overflow:hidden;fill:currentColor}.icon__cnt{width:100%;height:100%;background:inherit;fill:inherit;pointer-events:none;transform:translateX(0);-ms-transform:translate(0.5px, -0.3px)}.icon--m{width:50px;height:50px}.icon--l{width:100px;height:100px}.icon--xl{width:150px;height:150px}.icon--xxl{width:200px;height:200px}.icon__spinner{position:absolute;top:0;left:0;width:100%;height:100%}.icon--ei-spinner .icon__spinner,.icon--ei-spinner-2 .icon__spinner{-webkit-animation:spin 1s steps(12) infinite;animation:spin 1s steps(12) infinite}.icon--ei-spinner-3 .icon__spinner{-webkit-animation:spin 1.5s linear infinite;animation:spin 1.5s linear infinite}.icon--ei-sc-facebook{fill:#3b5998}.icon--ei-sc-github{fill:#333}.icon--ei-sc-google-plus{fill:#dd4b39}.icon--ei-sc-instagram{fill:#3f729b}.icon--ei-sc-linkedin{fill:#0976b4}.icon--ei-sc-odnoklassniki{fill:#ed812b}.icon--ei-sc-skype{fill:#00aff0}.icon--ei-sc-soundcloud{fill:#f80}.icon--ei-sc-tumblr{fill:#35465c}.icon--ei-sc-twitter{fill:#55acee}.icon--ei-sc-vimeo{fill:#1ab7ea}.icon--ei-sc-vk{fill:#45668e}.icon--ei-sc-youtube{fill:#e52d27}.icon--ei-sc-pinterest{fill:#bd081c}.icon--ei-sc-telegram{fill:#0088cc}*,*::after,*::before{box-sizing:border-box}h1,h2,h3,h4,h5,h6,ul,ol,dl,blockquote,p,address,hr,table,fieldset,figure,pre{margin-bottom:15px}ul,ol,dd{margin-left:15px}.highlight{background:#f7f7f7}.highlighter-rouge .highlight{background:#eef}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086B3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#099}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px;line-height:26px;color:#404040;background-color:#fbfbfb;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*::selection{color:#fff;background-color:#3af}h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:500;line-height:initial}h1{font-size:34px}h2{font-size:30px}h3{font-size:26px}h4{font-size:22px}h5{font-size:20px}h6{font-size:18px}img{max-width:100%;height:auto;vertical-align:middle}a{text-decoration:none;color:#3af;transition:.35s}a:hover{color:#0086e6}blockquote{padding-left:15px;border-left:3px solid #3af;font-family:'Volkhov', 'Times New Roman', Times, serif;font-style:normal;font-size:15px;background-color:rgba(220,235,245,0.2)}blockquote p{padding:10px}hr{height:1px;margin:30px 0;border:0;background-color:#f0f0f0}pre{overflow:auto;padding:25px;font-size:14px;white-space:pre-wrap;word-wrap:break-word;word-break:break-all;font-family:Courier, monospace}code{overflow:auto;white-space:pre-wrap;word-wrap:break-word;word-break:break-all;font-family:Courier, monospace;font-size:14px}p code,li code{padding:3px 5px}.o-wrapper{max-width:1440px;position:relative}.o-opacity{animation-duration:0.7s;animation-delay:0.2s;animation-fill-mode:both;animation-name:opacity}@keyframes opacity{from{opacity:0}to{opacity:1}}.c-btn{display:inline-block;white-space:nowrap;vertical-align:middle;font-family:'Volkhov', serif;font-size:12px;text-align:center;padding:8px 15px;cursor:pointer;transition:.35s}.c-btn--primary{color:#fff;background-color:#3af;background:linear-gradient(135deg, #3af 0%, #62d5ff 100%)}.c-btn--secondary{color:#fff;background-color:#cfcfdd;background:linear-gradient(135deg, #a2a2bd 0%, #cfcfdd 100%)}.c-btn--round{border-radius:30px}.c-btn--shadow{box-shadow:8px 10px 20px 0 rgba(46,61,73,0.15)}.c-btn--shadow:hover{box-shadow:2px 4px 8px 0px rgba(46,61,73,0.2)}.c-btn--middle{display:block;width:300px;max-width:100%}.c-btn--big{display:block;width:100%}.c-btn:hover{color:#fff;transition:.35s}.c-btn:active{transform:translateY(2px)}.c-sidebar{display:flex;flex-direction:column;justify-content:space-between;position:fixed;top:0;left:0;bottom:0;width:360px;padding:40px 20px 20px;text-align:center;box-shadow:1px 1px 0 rgba(31,35,46,0.15);background-color:#fff}.c-sidebar-author .c-author__cover{width:200px;height:250px;margin:0 auto 10px;border-radius:5%;overflow:hidden;background-color:#cfcfdd}.c-sidebar-author .c-author__cover img{width:100%;height:100%;border-radius:5%;transition:.35s}.c-sidebar-author .c-contact-menu .c-btn{min-width:110px}.c-sidebar-author .c-contact-menu .c-btn .icon{width:18px;height:18px;vertical-align:text-bottom;fill:#fff}.c-sidebar-author .c-author__info{font-family:'Volkhov', serif}.c-sidebar-author .c-author__name{font-size:18px;font-weight:700;line-height:21px}.c-sidebar-author .c-author__job{font-size:12px;color:#a0a0a0;margin:5px 0 0}.c-sidebar-author .c-contact-menu{margin:30px 0}.c-sidebar-author .c-contact-menu .c-btn--secondary{margin-right:10px}.c-sidebar-author .c-author__about{max-width:400px;margin:5px 5px 5px 55px;font-size:13px}.c-sidebar-footer .c-social__title{position:relative;font-family:'Volkhov', serif;font-size:15px;font-weight:700;color:#444}.c-sidebar-footer .c-social__title::before{content:"";display:block;height:2px;width:calc(50% - 40px);transform:translateY(-50%);position:absolute;top:50%;left:0;background-color:#444}.c-sidebar-footer .c-social__title::after{content:"";display:block;height:2px;width:calc(50% - 40px);transform:translateY(-50%);position:absolute;top:50%;right:0;background-color:#444}.c-sidebar-footer .c-social__list{list-style-type:none;padding:0;margin:15px 0}.c-sidebar-footer .c-social__list .c-social__item{display:inline-block;width:27px;height:27px}.c-sidebar-footer .c-social__list .icon{width:27px;height:27px;fill:#444;vertical-align:middle;transition:.35s}.c-sidebar-footer .c-social__list .icon:hover{fill:#3af;transform:scale(1.2);transition:.35s}.c-sidebar-footer .c-copyright p{font-size:13px;margin:0}@media only screen and (max-width: 900px){.c-sidebar{position:relative;width:100%;padding:20px}.c-sidebar .c-contact-menu{margin:20px 0}.c-sidebar-footer .c-social .c-social__title{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}.c-sidebar-footer .c-social__list{margin:0}.c-sidebar-footer .c-copyright{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}}@media only screen and (max-width: 480px){.c-sidebar-author .c-author__cover{width:80px;height:80px}.c-sidebar-author .c-author__cover img{width:100%;height:100%}.c-sidebar-author .c-contact-menu{margin:15px 0}.c-sidebar-author .c-contact-menu .c-btn{min-width:80px;font-size:10px;padding:4px 15px;margin-right:5px}.c-sidebar-author .c-contact-menu .c-btn .icon{width:16px;height:16px}.c-sidebar-footer .c-social .c-social__title{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}.c-sidebar-footer .c-social__list{margin:0}.c-sidebar-footer .c-social__list .icon{width:25px;height:25px}.c-sidebar-footer .c-copyright{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}}.c-content{position:relative;display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch;padding:0 20px 0;margin-left:360px}@media only screen and (max-width: 900px){.c-content{position:static;padding:0 15px 0;margin-left:0}}.c-posts{width:100%;display:flex;flex-direction:row;flex-wrap:wrap}.c-post{width:100%;max-width:100%;margin-bottom:20px;display:flex;flex-direction:row;align-items:stretch;min-height:90px;border-radius:10px;overflow:hidden;transition:.35s;background-color:#fff;box-shadow:0 1px 1px 0 rgba(31,35,46,0.15)}.c-post:hover{transform:translate(0px, -2px);box-shadow:0 15px 45px -10px rgba(10,16,34,0.2)}.c-post .c-post-thumbnail{display:block;width:30%;max-width:100%;min-height:180px;border-radius:10px 0 0 10px;background-color:rgba(220,235,245,0.2);background-size:cover;background-position:50% 50%}.c-post .c-post-content{padding:15px;width:70%}.c-post .c-post-content .c-post-title{font-size:35px;font-weight:450;margin:0 0 15px}.c-post .c-post-content .c-post-title a{text-decoration:none;color:#263959}.c-post .c-post-content .c-post-date,.c-post .c-post-content .c-post-words{font-size:12px}.c-load-more{padding:20px;margin:20px auto 40px;font-size:13px;color:#fff;border:none;background-color:#3af;outline:none}.c-load-more:hover{background-color:#0086e6}@media only screen and (max-width: 1200px){.c-post{width:48%;max-width:100%;margin:0 1% 20px;flex-direction:column}.c-post .c-post-thumbnail{width:100%;border-radius:10px 10px 0 0}.c-post .c-post-content{width:100%}.c-post .c-post-content .c-post-title{font-size:21px;margin:15px 0}}@media only screen and (max-width: 480px){.c-post{width:100%;max-width:100%;margin:0 0 20px}.c-post .c-post-content{width:100%}.c-post .c-post-content .c-post-title{font-size:21px;margin:15px 0}}.c-article{width:100%;margin:20px 0}.c-wrap-content{padding:20px;background-color:#fff}.c-article__image{position:relative;background-color:rgba(220,235,245,0.2);background-position:center;background-size:cover;background-repeat:no-repeat}.c-article__image:after{content:"";display:block;padding-top:56%}.c-article__header{margin-bottom:25px;text-align:center}.c-article__header .c-article__title{margin-bottom:10px;font-size:45px;font-weight:450}.c-article__date span{font-size:13px;text-transform:uppercase;color:#a0a0a0}.c-article__footer{margin:30px 0 0;padding-bottom:30px;text-align:center;border-bottom:1px solid #f0f0f0}.c-article__footer .c-article__share{transition:.35s}.c-article__footer .c-article__share a .icon{vertical-align:middle;transition:.35s}.c-article__footer .c-article__share a .icon:hover{opacity:.7;transition:.35s}.c-article__footer .c-article__tag{margin-bottom:5px}.c-article__footer .c-article__tag a{display:inline-block;vertical-align:middle;padding:5px 10px;font-family:'Volkhov', 'Times New Roman', Times, serif;font-size:10px;line-height:10px;text-transform:uppercase;background-color:rgba(115,138,160,0.6);color:#fff}.c-article__footer .c-article__tag a:hover{background-color:rgba(80,100,118,0.6)}.c-article__footer .c-article__tag a:last-child{margin-right:0}.c-recent-post{padding:30px 0}.c-recent-post .c-recent__title{font-size:14px;text-align:center;text-transform:uppercase;margin-bottom:30px}.c-recent-post .c-recent__box{display:flex;flex-direction:row;flex-wrap:wrap}.c-recent-post .c-recent__item{max-width:23%;flex-basis:23%;margin:0 1% 20px;border-radius:10px;overflow:hidden;text-align:center;background-color:#fff;box-shadow:0 1px 1px 0 rgba(31,35,46,0.15);transition:.35s}.c-recent-post .c-recent__item h4{margin-bottom:5px;font-size:12px;text-transform:uppercase}.c-recent-post .c-recent__item h4 a{color:#444}.c-recent-post .c-recent__item:hover{box-shadow:2px 4px 8px 0px rgba(46,61,73,0.2)}.c-recent-post .c-recent__footer{padding:15px}.c-recent-post .c-recent__image{display:block;width:100%;min-height:180px;background-color:rgba(220,235,245,0.2);background-size:cover;background-position:center;background-repeat:no-repeat}.c-recent-post .c-recent__date{color:#a0a0a0;font-size:12px}@media only screen and (max-width: 1200px){.c-recent-post .c-recent__item{max-width:48%;flex-basis:48%}}@media only screen and (max-width: 900px){.c-article{margin:15px 0}}@media only screen and (max-width: 480px){.c-wrap-content{padding:15px}.c-article__header{margin-bottom:5px}.c-article__header .c-article__title{font-size:24px;margin-bottom:5px}.c-recent-post .c-recent__item{max-width:100%;flex-basis:100%;margin:0 0 20px}}.c-blog-tags{width:100%;padding:20px;margin:20px 0 40px;background-color:#fff}.c-blog-tags h1{text-align:center;margin-bottom:0}.c-blog-tags h2{font-size:18px;text-transform:uppercase;margin:30px 0;color:#757575}.c-tag__list{list-style:none;padding:0 0 40px;margin:40px 0 0;border-bottom:1px solid #f0f0f0}.c-tag__list li{display:inline-block;margin-right:15px}.c-tag__list li a{color:#404040;text-transform:uppercase;font-size:12px}.c-tag__list li a:hover{color:#000}.c-tag__item{margin-bottom:15px}.c-tag__image{width:50px;height:50px;border-radius:50%;margin-right:5px}@media only screen and (max-width: 480px){.c-blog-tags{padding:15px}.c-blog-tags h1{font-size:27px}.c-blog-tags h2{font-size:16px;margin:15px 0}.c-tag__list{padding:0 0 30px;margin:30px 0 0}.c-tag__item{margin-bottom:5px}.c-tag__image{display:none}}.c-header{position:relative;width:100%;margin:20px 0}.c-header__box{position:relative;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.c-header__box .icon--ei-search{position:absolute;top:7px;left:15px;fill:#ccc}.c-search{width:80%}.c-search .c-search__box{display:flex;align-items:center}.c-search .c-search__text{position:relative;width:100%;padding:10px 10px 10px 40px;border:1px solid #dce4ea;border-radius:30px;outline:none;color:#a0a0a0}.c-search .c-search__text::placeholder{color:#ccc}.c-search .c-search__text:hover{box-shadow:0 1px 0px rgba(132,135,138,0.1);transition:.35s}.c-search .c-search-results-list{position:absolute;width:100%;margin:10px 0 0;list-style-type:none;background-color:#fff;z-index:1}.c-search .c-search-results-list li{display:flex;flex-wrap:wrap;align-items:center;margin:0;padding:20px 25px 0;background-color:#fff;line-height:1.4;border-left:solid 1px #edeeee;border-right:solid 1px #edeeee}.c-search .c-search-results-list li:first-child{border-top-left-radius:5px;border-top-right-radius:5px;border-top:solid 1px #edeeee}.c-search .c-search-results-list li:last-child{border-bottom-left-radius:5px;border-bottom-right-radius:5px;padding-bottom:25px;border-bottom:solid 1px #edeeee}.c-search .c-search-results-list li a{font-size:16px}.c-nav{flex-grow:1;padding-left:20px}.c-nav .c-nav__list{display:flex;justify-content:flex-end}.c-nav .c-nav__list .c-nav__item{display:flex;align-items:center;float:left;padding:4px 10px;font-size:10px;text-transform:uppercase;white-space:nowrap;border:1px solid #dce4ea;box-shadow:0 1px 0px rgba(132,135,138,0.4);will-change:transform;transform:translateY(0px);cursor:pointer}.c-nav .c-nav__list .c-nav__item:hover{color:#222;background-color:#fff}.c-nav .c-nav__list .c-nav__item.is-active{box-shadow:0 0 0 rgba(132,135,138,0.5);transform:translateY(1px);color:#cfcfdd}.c-nav .c-nav__list .c-nav__item.is-active:hover{background-color:#fbfbfb}.c-nav .c-nav__list .c-nav__item:first-child{border-radius:10px 0 0 10px}.c-nav .c-nav__list .c-nav__item:last-child{border-radius:0 10px 10px 0}.c-nav .c-nav__list .c-nav__item .icon{width:18px;height:18px;margin-right:3px}@media only screen and (max-width: 900px){.c-header{margin:15px 0}}@media only screen and (max-width: 480px){.c-header .c-header__box{flex-direction:column}.c-header .c-search{width:100%}.c-header .c-search .c-search__text{padding:8px 8px 8px 40px}.c-header .c-nav{margin-top:15px}.c-header .c-nav .c-nav__list{justify-content:center}.c-header .c-nav .c-nav__item{padding:4px 8px}}.c-categories{width:100%}.c-categories__list{width:100%;display:flex;flex-direction:row;flex-wrap:wrap}.c-categories__item{max-width:25%;flex-basis:25%;padding:0 10px 20px}.c-categories__link{height:100%;display:flex;flex-direction:column;align-items:center;padding:20px 10px;border-radius:5px;box-shadow:5px 5px 25px rgba(46,61,73,0.15);background-color:#fff;transition:.35s}.c-categories__link:hover{box-shadow:2px 4px 8px 0px rgba(46,61,73,0.2)}.c-categories__link:hover .c-categories__img .c-categories__more{opacity:1;transition:.35s}.c-categories__link .c-categories__container{width:100%;word-wrap:break-word}.c-categories__link .c-categories__container.c-empty-figure{display:flex;flex-direction:column;justify-content:center;flex-grow:1}.c-categories__img{position:relative;max-width:100%}.c-categories__img figure{position:relative;width:200px;max-width:100%;margin-bottom:20px;overflow:hidden;background-size:cover;background-repeat:no-repeat;background-position:center;border-radius:50%;box-shadow:inset 0 1px 3px rgba(141,165,185,0.3)}.c-categories__img figure:after{content:"";display:block;padding-top:100%}.c-categories__img figure:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,0.15)}.c-categories__img .c-categories__more{display:inline-block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);font-weight:700;color:#fff;text-transform:uppercase;text-shadow:0 1px 0 rgba(104,172,191,0.3);opacity:0;transition:.35s}.c-categories__container{text-align:center}.c-categories__container .c-categories__header{font-size:13px;margin-bottom:10px;font-weight:normal;text-transform:uppercase;color:#404040}.c-categories__container .c-categories__count{font-family:'Volkhov', serif;font-size:12px;color:#404040;margin-bottom:0}.c-categories__container .c-categories__count span{display:inline-block;width:20px;height:20px;line-height:20px;vertical-align:baseline;margin-right:5px;border-radius:50%;color:#fff;background-color:#ee6c6c}@media only screen and (max-width: 1200px){.c-categories .c-categories__item{max-width:33.333%;flex-basis:33.333%}}@media only screen and (max-width: 1050px){.c-categories .c-categories__item{max-width:50%;flex-basis:50%}}@media only screen and (max-width: 480px){.c-categories .c-categories__item{max-width:100%;flex-basis:100%;padding:0 0 20px}}.c-form-box{position:absolute;top:0;width:calc(100% - 40px);min-height:100vh;padding:0 20px;background-color:#fff;z-index:1}.c-form-bnt__close{position:absolute;top:0px;left:0;width:30px;height:30px;cursor:pointer;transition:.35s}.c-form-bnt__close:hover{transform:scale(0.8);opacity:.8}.c-form{position:relative;width:750px;max-width:100%;margin:40px auto}.c-form .c-form__title{margin:0 0 40px;min-width:0;border:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-transform:uppercase;text-align:center}.c-form a{color:#404040}.c-form__group{margin-bottom:20px}.c-form__group label{display:block;text-transform:uppercase;font-size:10px}.c-form__group input,.c-form__group textarea{width:100%;padding:10px 15px;color:#404040;border:1px solid #dce4ea;outline:none;transition:.35s}.c-form__group input:focus,.c-form__group textarea:focus{box-shadow:0 4px 25px rgba(132,135,138,0.1)}.c-form__group button{padding:20px;text-transform:uppercase;outline:none;border:none}.c-thank-you p{position:relative;padding:20px 40px;width:750px;max-width:100%;text-transform:uppercase;font-size:12px;line-height:18px;font-weight:700;margin:40px auto 0;text-align:center;color:#fff;background:linear-gradient(135deg, #55b5ad 0%, #5ec9c5 100%)}.c-thank-you p .c-form-bnt__close{width:25px;height:25px;background:transparent}.c-thank-you p a{color:#fff}@media only screen and (max-width: 900px){.c-form-box{width:100%;left:0;right:0}}@media only screen and (max-width: 480px){.c-form-bnt__close{width:25px;height:25px}}.c-newsletter{padding:30px 0 60px;margin:0 auto;border-bottom:1px solid #f0f0f0}.c-newsletter__header{text-align:center}.c-newsletter__header .c-newsletter__title{font-size:14px;text-transform:uppercase;text-align:center}.c-newsletter__header .c-newsletter__subtitle{margin-bottom:15px}.c-newsletter-form{width:100%;max-width:750px;margin:0 auto}.c-newsletter-form .c-newsletter-form__group{display:flex}.c-newsletter__email{width:70%;height:40px;padding:10px 15px;border:1px solid #ddd;border-right-color:transparent;outline:none;transition:.35s}.c-newsletter__email:focus{box-shadow:0 4px 25px rgba(132,135,138,0.1)}.c-newsletter__button{width:30%;height:40px;color:#fff;background-color:#3af;transition:.35s;border:none;outline:none;cursor:pointer}.c-newsletter__button:hover{background-color:#0086e6}@media only screen and (max-width: 480px){.c-newsletter__button{font-size:13px}}.c-comments{padding:30px 0;border-top:1px solid #f0f0f0}.c-top{position:fixed;width:40px;height:40px;bottom:20px;color:#757575;cursor:pointer;transition:.35s;right:-100px;z-index:10;opacity:.5}.c-top--active{right:15px}.c-top:hover{color:#757575;opacity:1}.u-text-left{text-align:left}.u-text-right{text-align:right}.u-text-center{text-align:center}.u-text-justify{text-align:justify}.u-block{display:block}.u-inline-block{display:inline-block}.u-inline{display:inline}.u-full-width{display:block;width:100%}.u-vertical-center{display:flex;align-items:center;justify-content:center}.u-responsive-image{max-width:100%;height:auto;vertical-align:middle}.u-show{display:block !important}.u-hide{display:none !important}.u-invisible{visibility:hidden}.u-float-left{float:left}.u-float-right{float:right}.u-no-padding-top{padding-top:0}.u-no-padding-bottom{padding-bottom:0}.u-no-padding-left{padding-left:0}.u-no-padding-right{padding-right:0}.u-no-padding{padding:0}.u-no-margin-top{margin-top:0}.u-no-margin-bottom{margin-bottom:0}.u-no-margin-left{margin-left:0}.u-no-margin-right{margin-right:0}.u-no-margin{margin:0}.u-lists-reset{list-style-type:none;margin:0;padding:0}.u-clearfix::before,.u-clearfix::after{content:"";display:table;clear:both}.u-screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}

  </style>
</head>

<body>
  
  <div class="o-wrapper">
    <aside class="c-sidebar">
  <div class="c-sidebar-author">
    <div class="c-author__cover">
      <a href="/">
        <img src="/images/kkzhang.jpg" alt="KKZHANG">
      </a>
    </div>
    <div class="c-author__info">
      <div class="c-author__name">KKZHANG</div>
      <span class="c-author__job">Software Engineer</span>
    </div>
    <div class="c-contact-menu">
      
      <a href="/contact" class="c-contact-btn c-btn c-btn--secondary c-btn--round c-btn--shadow"><span data-icon='ei-envelope' data-size='s'></span> Send me</a>
      
      
      <a href="https://twitter.com/intent/user?screen_name=KZ25674171" class="c-btn c-btn--primary c-btn--round c-btn--shadow"><span data-icon='ei-sc-twitter' data-size='s'></span> Follow me</a>
      
    </div>
    <!-- <p class="c-author__about">ğŸ‘‹ Hi, Iâ€™m @kkzhang. ğŸ‘I am now working at @MeiTuan, engaged in middleware development. âœŒï¸ I used to work at @ByteDance, develop software about Instant Messaging.  â˜ï¸ I am interested in distributed-system & operating-system. ğŸ§­ The main development language is java, and I also know little golang.</p> -->
    <!-- <div class="c-author__about" align="left">ğŸ‘‹ Hi, Iâ€™m @kkzhang.<br> ğŸ‘ I am now working at @MeiTuan, engaged in middleware development.<br> âœŒï¸ I used to work at @ByteDance, develop software about Instant Messaging. <br> â˜ï¸ I am interested in distributed-system & operating-system.<br> ğŸ§­ The main development language is java, and I also know little golang.</div> -->
    <div class="c-author__about" align="left">
      <ul>
        <li>ğŸ‘‹ Hi, Iâ€™m @kkzhang</li>
        <li>âœŒï¸ Email: kkzhang1029@gmail.com</li>
        <li>ğŸ§­ Work experience:</li>
          <ul>
            <li>â˜ï¸ Meituan - Infrastructure</li>
            <li>ğŸ‘ ByteDance - Instant Messaging</li>
          </ul>
      </ul>
    </div>
  </div>

  <div class="c-sidebar-footer">
    <div class="c-social">
      <div class="c-social__title">Social</div>
      <ul class="c-social__list u-lists-reset">
        
          <li class="c-social__item"><a href="https://twitter.com/KZ25674171" target="_blank"><div data-icon='ei-sc-twitter' data-size='s'></div></a></li>
        
        
        
        
          <li class="c-social__item"><a href="https://github.com/kkzhang-tt" target="_blank"><div data-icon='ei-sc-github' data-size='s'></div></a></li>
        
        
        
        
          <li class="c-social__item"><a href="https://instagram.com/kzhang29" target="_blank"><div data-icon='ei-sc-instagram' data-size='s'></div></a></li>
        
        
        
        
        
        
          <li class="c-social__item"><a href="https://in.linkedin.com/in/k-z-23575b202" target="_blank"><div data-icon='ei-sc-linkedin' data-size='s'></div></a></li>
        
      </ul>
    </div>
    <div class="c-copyright">
      <p>2021 &copy; KKZHANG</p>
    </div>
  </div>
</aside> <!-- /.c-sidebar -->

<main class="c-content">
  <article class="c-article">
  <div class="c-article__content">
    <header class="c-header u-hide u-no-margin-top">
      <div class="c-header__box">
        <div class="c-search u-full-width">
          <div class="c-search__box">
            <label for="js-search-input" class="u-screen-reader-text">Search for Blog</label>
            <input type="text" id="js-search-input" class="c-search__text" autocomplete="off" placeholder="Type to search...">
            <div data-icon='ei-search' data-size='s'></div>
          </div>
          <ul id="js-results-container" class="c-search-results-list"></ul>
        </div>
      </div>
    </header>
    
    <div class="c-article__image o-opacity" style="background-image: url( /images/gfs/gfs_1.png )"></div>
    
    <div class="c-wrap-content">
      <header class="c-article__header">
        <h1 class="c-article__title">Google File System</h1>
        <div class="c-article__date">
          <span>2021, Jul 29</span>
        </div>
      </header>
      <h1 id="0-keywords">0-Keywords</h1>

<p>å®¹é”™(Fault Tolerance)ï¼Œæ‰©å±•æ€§(scalability)ï¼Œæ•°æ®å­˜å‚¨(Data Storage)ï¼Œé›†ç¾¤å­˜å‚¨(Clustered Storage)</p>

<h1 id="1-introduction">1-Introduction</h1>

<p>GFS ä»¥å¯ç”¨æ€§ï¼Œå¯ä¼¸ç¼©æ€§ï¼Œå¯é æ€§ï¼Œæ€§èƒ½ç­‰ä½œä¸ºç›®æ ‡ï¼Œä¸ä¹‹å‰çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæœ‰æ‰€åŒºåˆ«çš„æ˜¯ï¼Œå…¶è®¾è®¡æ€è·¯ä¸»è¦ç»“åˆ Google å†…éƒ¨çš„å®é™…æƒ…å†µè€ƒè™‘ï¼š</p>

<ol>
  <li>ç»„ä»¶å¤±æ•ˆæ˜¯æ­£å¸¸ç°è±¡ï¼ˆNormalï¼‰è€Œéå¼‚å¸¸ï¼ˆExceptionï¼‰
    <ul>
      <li>éœ€è¦æ”¯æŒç³»ç»Ÿç›‘æ§ï¼Œå®¹ç¾ï¼Œè‡ªåŠ¨æ¢å¤æœºåˆ¶</li>
    </ul>
  </li>
  <li>å­˜å‚¨çš„æ–‡ä»¶é€šå¸¸æ¯”è¾ƒå¤§ï¼ˆHugeï¼‰
    <ul>
      <li>å¦‚æœæ–‡ä»¶å—ï¼ˆblockï¼‰æ¯”è¾ƒå°çš„è¯ï¼ˆæ¯”å¦‚ä»¥ KB ä¸ºå•ä½ï¼‰ï¼Œé‚£ä¹ˆå•ä¸ªæ–‡ä»¶éœ€è¦ç”±å¾ˆå¤šæ–‡ä»¶å—ç»„æˆï¼Œä¸åˆ©äºæ–‡ä»¶ç®¡ç†ï¼Œå› æ­¤æ–‡ä»¶å—çš„å¤§å°éœ€è¦å¤šæ–¹é¢è¡¡é‡ï¼›å¤§æ–‡ä»¶çš„ IO æ“ä½œä¹Ÿéœ€è¦è€ƒè™‘</li>
    </ul>
  </li>
  <li><strong>å¤§å¤šæ•°æ–‡ä»¶çš„æ›´æ–°æ–¹å¼ä¸ºè¿½åŠ ï¼ˆAppendingï¼‰è€Œä¸æ˜¯è¦†ç›–å†™</strong>ï¼ˆOverwritingï¼‰
    <ul>
      <li>æ–‡ä»¶å†™å®Œä¹‹åå¤šä¸ºé¡ºåºè¯»ï¼Œå‡ ä¹ä¸åŒ…å«éšæœºå†™çš„æ“ä½œï¼›å› æ­¤ï¼Œæ•°æ®è¿½åŠ æ“ä½œæ˜¯æ€§èƒ½ä¼˜åŒ–ä¸åŸå­æ€§çš„ä¸»è¦è€ƒé‡å› ç´ </li>
    </ul>
  </li>
  <li>åº”ç”¨ç¨‹åºå’Œæ–‡ä»¶ç³»ç»Ÿ API çš„ååŒè®¾è®¡æé«˜äº†æ•´ä¸ªç³»ç»Ÿçš„çµæ´»æ€§ï¼ˆFlexibilityï¼‰
    <ul>
      <li><strong>æ”¯æŒåŸå­æ€§åœ° Append æ“ä½œ</strong>ï¼Œä»è€Œä¿è¯å¤šä¸ª Client èƒ½å¤ŸåŒæ—¶è¿›è¡Œ File Appendingï¼Œä¸éœ€è¦é¢å¤–çš„åŒæ­¥æ“ä½œæ¥ä¿è¯ä¸€è‡´æ€§</li>
    </ul>
  </li>
</ol>

<h1 id="2-overview">2-Overview</h1>

<h2 id="21-assumptions">2.1-Assumptions</h2>

<p>é’ˆå¯¹ä¸Šè¿°çš„æƒ…å†µåšè¿›ä¸€æ­¥è¯´æ˜ï¼Œé˜è¿°æ•´ä¸ªç³»ç»Ÿçš„è®¾è®¡é¢„æœŸï¼š</p>

<ol>
  <li>ç³»ç»Ÿé›†ç¾¤æ˜¯ç”±è®¸å¤šå»‰ä»·æœºå™¨ç»„æˆï¼Œç»„ä»¶å¤±æ•ˆæ˜¯æ¯”è¾ƒå¸¸è§çš„çŠ¶æ€ï¼›å› æ­¤éœ€è¦å®ç°å¯¹æ•´ä¸ªç³»ç»Ÿçš„æŒç»­ç›‘æ§ï¼Œæä¾›å†—ä½™å¹¶æ¢å¤å¤±æ•ˆçš„ç»„ä»¶</li>
  <li>ç³»ç»Ÿå­˜å‚¨å¤§é‡çš„å¤§æ–‡ä»¶ï¼š<strong>æ–‡ä»¶æ•°é‡å¤šï¼Œæ–‡ä»¶å®¹é‡å¤§</strong>ï¼›ä¸è¿‡ä¹Ÿéœ€è¦æ”¯æŒå°æ–‡ä»¶ï¼ˆä½†æ˜¯å¹¶ä¸éœ€è¦é’ˆå¯¹å°æ–‡ä»¶è¿›è¡Œç‰¹æ®Šä¼˜åŒ–ï¼‰</li>
  <li>è¯»è´Ÿè½½åŒ…å«ä¸¤ç§ï¼š<strong>å¤§è§„æ¨¡çš„æµå¼è¯»</strong> &amp; <strong>å°è§„æ¨¡çš„éšæœºè¯»</strong>ï¼›åŒä¸€ä¸ª Client çš„æ“ä½œé€šå¸¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶çš„è¿ç»­éƒ¨åˆ†</li>
  <li>å†™è´Ÿè½½åŒ…æ‹¬ï¼š<strong>å¤§è§„æ¨¡é¡ºåº Append</strong> &amp; <strong>å°è§„æ¨¡çš„éšæœºå†™</strong>ï¼›æ•°æ®ä¸€æ—¦è¢«å†™å…¥æ–‡ä»¶å°±ä¼šå¾ˆå°‘å†æ¬¡ä¿®æ”¹</li>
  <li>éœ€è¦æ”¯æŒå¤šä¸ª Client å¹¶è¡Œ Append æ•°æ®åˆ°åŒä¸€ä¸ªæ–‡ä»¶çš„è¯­ä¹‰ï¼Œå³éœ€è¦<strong>æ”¯æŒåŸå­ Appending</strong></li>
  <li><strong>é«˜æ€§èƒ½ï¼Œå¤§æ‰¹é‡åœ°å¤„ç†æ•°æ®</strong>æ¯”ä½å»¶è¿Ÿæ›´åŠ é‡è¦</li>
</ol>

<h2 id="22-interface">2.2-Interface</h2>

<p>GFS  æ”¯æŒç±»ä¼¼ POSIX æ ‡å‡†çš„ APIï¼ŒåŒ…æ‹¬åˆ›å»ºæ–‡ä»¶ï¼Œåˆ é™¤æ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶ï¼Œå…³é—­æ–‡ä»¶ç­‰ï¼›åŒæ—¶è¿˜æ”¯æŒå¿«ç…§ä¸è¿½åŠ æ“ä½œã€‚</p>

<blockquote>
  <p>æ–‡ä»¶ä»¥åˆ†å±‚ç›®å½•çš„å½¢å¼ç»„ç»‡ï¼Œå¹¶ç”¨è·¯å¾„æ¥æ ‡è¯†</p>

</blockquote>

<p>å¿«ç…§å¯ä»¥ä»¥è¾ƒä½çš„æˆæœ¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•æ ‘çš„æ‹·è´ï¼›<strong>è®°å½•è¿½åŠ å…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ•°æ®è¿½åŠ æ“ä½œï¼Œå¹¶ä¿è¯æ¯ä¸ªè¿½åŠ æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„</strong>ã€‚</p>

<blockquote>
  <p>å®¢æˆ·ç«¯ä¸éœ€è¦é¢å¤–çš„é”å®šåŒæ­¥æ“ä½œå°±å¯ä»¥å®Œæˆå¹¶è¡Œè¿½åŠ æ–‡ä»¶æ“ä½œ</p>

</blockquote>

<h2 id="23-architecture">2.3-Architecture</h2>

<p><img src="/images/gfs/gfs_1.png" alt="" /></p>

<p>ä¸€ä¸ª GFS é›†ç¾¤åŒ…å«ä¸€ä¸ª Master èŠ‚ç‚¹ï¼Œå¤šä¸ª Chunk æœåŠ¡å™¨ï¼Œå¹¶ä¸”åŒæ—¶è¢«å¤šä¸ª Client è®¿é—®ã€‚</p>

<blockquote>
  <p>ä¸€ä¸ª Master èŠ‚ç‚¹æ˜¯æŒ‡ä¸€ä¸ªç³»ç»Ÿä¸­åªå­˜åœ¨ä¸€ä¸ªé€»è¾‘ä¸Šçš„ Master ç»„ä»¶ï¼Œä½†æ˜¯è¯¥ç»„ä»¶å¯èƒ½å­˜åœ¨å¤šä¸ªå‰¯æœ¬ä»¥å®ç°å®¹ç¾</p>

</blockquote>

<p>GFS ä¸­å­˜å‚¨çš„<strong>æ–‡ä»¶è¢«æ‹†åˆ†æˆå¤šä¸ªå›ºå®šå¤§å°çš„ Chunk å—</strong>ã€‚Chunk åˆ›å»ºæ—¶ï¼ŒMaster èŠ‚ç‚¹ä¼šç»™å…¶åˆ†é…ä¸€ä¸ª<strong>å”¯ä¸€ä¸”ä¸å˜çš„ ID</strong>ã€‚Chunk æœåŠ¡å™¨æŠŠ Chunk ä»¥ Linux æ–‡ä»¶çš„å½¢å¼ä¿å­˜åœ¨æœ¬åœ°ç£ç›˜ä¸Šï¼Œå¹¶æ”¯æŒ<strong>æ ¹æ® Chunk æ ‡è¯† &amp; å­—èŠ‚èŒƒå›´è¿›è¡Œæ•°æ®è¯»å†™</strong>ã€‚</p>

<blockquote>
  <p>ä¸ºäº†æé«˜å¯é æ€§ï¼Œ<strong>æ¯ä¸ª Chunk éƒ½ä¼šè¢«å¤åˆ¶åˆ°å¤šä¸ª Chunk æœåŠ¡å™¨ä¸Š</strong></p>

</blockquote>

<p>Master èŠ‚ç‚¹ç”¨äºç®¡ç† GFS ç³»ç»Ÿä¸­çš„å…ƒæ•°æ®ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>

<ol>
  <li>File NameSpace</li>
  <li>æ–‡ä»¶è®¿é—®æ§åˆ¶ä¿¡æ¯</li>
  <li><strong><em>æ–‡ä»¶ä¸å¯¹åº”çš„ Chunk å—åˆ—è¡¨çš„æ˜ å°„å…³ç³»</em></strong></li>
  <li><strong><em>Chunk çš„ä½ç½®ä¿¡æ¯</em></strong></li>
</ol>

<p>é™¤äº†ç³»ç»Ÿå…ƒæ•°æ®ï¼ŒMaster èŠ‚ç‚¹è¿˜ç”¨äºæ§åˆ¶ç³»ç»Ÿçš„æ´»åŠ¨ï¼š</p>

<ol>
  <li>Chunk ç§Ÿç”¨ç®¡ç†</li>
  <li>å­¤å„¿ Chunk çš„å›æ”¶</li>
  <li>Chunk å—åœ¨ Chunk æœåŠ¡å™¨ä¹‹é—´çš„è¿ç§»</li>
</ol>

<p>Master èŠ‚ç‚¹ç»´æŠ¤ä¸ Chunk æœåŠ¡å™¨ä¹‹é—´çš„å¿ƒè·³ï¼ŒåŒæ—¶å‘é€æŒ‡ä»¤åˆ°å„ä¸ª Chunk æœåŠ¡å™¨å¹¶æ¥æ”¶ Chunk æœåŠ¡å™¨çš„çŠ¶æ€ä¿¡æ¯ã€‚</p>

<p><strong>Client ä¸ Master èŠ‚ç‚¹é€šä¿¡ç”¨äºè·å–å…ƒæ•°æ®</strong>ï¼Œå¯¹äº<strong>æ–‡ä»¶çš„æ•°æ®æ“ä½œæ˜¯ç”± Client ç›´æ¥ä¸ Chunk æœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„</strong>ã€‚</p>

<p>Client ä¸ Chunk æœåŠ¡å™¨éƒ½ä¸éœ€è¦å¯¹æ–‡ä»¶æ•°æ®è¿›è¡Œç¼“å­˜ï¼š</p>

<ol>
  <li>Client ä¸€èˆ¬æ˜¯ä»¥æµçš„æ–¹å¼è¯»å–ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶</li>
  <li>Chunk ä»¥æœ¬åœ°æ–‡ä»¶çš„å½¢å¼ä¿å­˜åœ¨ Chunk æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥å®Œå…¨ä¾èµ– Linux æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜</li>
</ol>

<h2 id="24-single-master">2.4-Single Master</h2>

<p>ä¸Šé¢ä»‹ç»ï¼Œæ•´ä¸ªç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ª Master èŠ‚ç‚¹ï¼›å•ä¸€ Master èŠ‚ç‚¹ç®€åŒ–äº†ç³»ç»Ÿè®¾è®¡ï¼Œä½†æ˜¯å•ä¸ªèŠ‚ç‚¹å¯èƒ½ä¼šå¯¼è‡´å…¶æˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆï¼Œå› æ­¤è¦å°½é‡å‡å° Master çš„è¯»å†™å‹åŠ›ã€‚</p>

<ul>
  <li>Client åªä¼šå‘ Master è¯¢é—®å…¶åº”è¯¥è®¿é—®çš„ Chunk æœåŠ¡å™¨ï¼Œå¹¶ä¸ä» Master è¿›è¡Œæ–‡ä»¶æ•°æ®è¯»å–</li>
  <li>Client ä¼šå°†ä» Master è·å–çš„å…ƒæ•°æ®ç¼“å­˜åœ¨æœ¬åœ°ä¸€æ®µæ—¶é—´ï¼Œåç»­å°†ç›´æ¥å’Œ Chunk æœåŠ¡å™¨è¿›è¡Œæ•°æ®è¯»å†™æ“ä½œ</li>
  <li><strong>Client åœ¨å‘ Master è¯·æ±‚ Chunk ä¿¡æ¯æ—¶ï¼Œé€šå¸¸ä¼šä¸€æ¬¡æ€§è¯·æ±‚å¤šä¸ª Chunkï¼Œè€Œä¸” Master å“åº”æ—¶ä¹Ÿä¼šè¿”å›è¢«è¯·æ±‚çš„ Chunk åé¢çš„ Chunk ä¿¡æ¯ï¼Œå‡å°äº†äº¤äº’æ¬¡æ•°</strong></li>
</ul>

<p>æ•´ä½“çš„æ–‡ä»¶è¯»å–æµç¨‹å¦‚ä¸‹ï¼š</p>

<ol>
  <li>Client æŠŠä¸šåŠ¡ç¨‹åºä¸­æŒ‡å®šçš„æ–‡ä»¶å­—èŠ‚åç§»é‡ï¼Œ<em>æ ¹æ®å›ºå®šçš„ Chunk å¤§å°è½¬æ¢ä¸ºå¯¹åº”çš„ Chunk ç´¢å¼•</em></li>
  <li>Client æŠŠ FileName + Chunk Index å‘é€ç»™ Master èŠ‚ç‚¹</li>
  <li>Master å°†è¯·æ±‚çš„ <em>Chunk å”¯ä¸€æ ‡è¯†ä¸å…¶å‰¯æœ¬ä½ç½®ä¿¡æ¯è¿”å›ç»™ Client</em></li>
  <li>Client ç”¨ <em>FileName + Chunk Index ä½œä¸º key å°†è¿™äº›ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°</em></li>
  <li>
    <p>Client è®¿é—®å…¶ä¸­è¾ƒè¿‘çš„ Chunk å‰¯æœ¬ï¼Œè¯·æ±‚ä¸­æºå¸¦äº† <em>Chunk å”¯ä¸€æ ‡è¯† + è®¿é—®æ–‡ä»¶çš„å­—èŠ‚èŒƒå›´</em></p>

    <blockquote>
      <p>ä¹‹åé’ˆå¯¹è¯¥ Chunk çš„è®¿é—®éƒ½ä¸ä¼šå†è®¿é—® Masterï¼Œé™¤éç¼“å­˜å¤±æ•ˆæˆ–è€…æ–‡ä»¶è¢«é‡æ–°æ‰“å¼€</p>

    </blockquote>
  </li>
</ol>

<h2 id="25-chunk-size">2.5-Chunk Size</h2>

<p>GFS çš„ Chunk å¤§å°ä¸º 64MBï¼Œè¿œè¿œå¤§äºä¸€èˆ¬æ–‡ä»¶ç³»ç»Ÿçš„ Block Size(Linux é»˜è®¤ 4KB)ï¼›ä½¿ç”¨è¾ƒå¤§ Chunk çš„åŸå› æœ‰ï¼š</p>

<ul>
  <li><strong>å‡å°äº† Client ä¸ Master ä¹‹é—´çš„äº¤äº’é¢‘ç‡</strong>ï¼šåœ¨è·å– Chunk ä¿¡æ¯åå°±å¯ä»¥å¯¹åŒä¸€ä¸ª Chunk è¿›è¡Œå¤šæ¬¡è¯»å†™æ“ä½œï¼Œå¹¶ä¸”ä¸éœ€è¦å†æ¬¡è¯·æ±‚ Masterï¼›ç”±äºè¯»å†™è´Ÿè½½ä¸»è¦ä»¥è¿ç»­è¯»å†™å¤§æ–‡ä»¶ä¸ºä¸»ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆé™ä½è´Ÿè½½</li>
  <li>ç”±äºä½¿ç”¨äº†è¾ƒå¤§å°ºå¯¸çš„ Chunkï¼Œ<strong>Client èƒ½å¤Ÿå®ç°å¯¹ä¸€ä¸ª Chunk çš„å¤šæ¬¡æ“ä½œ</strong>ï¼Œå¯ä»¥é€šè¿‡ä¸ Chunk æœåŠ¡å™¨ä¹‹é—´ç»´æŠ¤è¾ƒé•¿æ—¶é—´çš„ TCP è¿æ¥æ¥é™ä½ç½‘ç»œè´Ÿè½½</li>
  <li>è¾ƒå¤§å°ºå¯¸çš„ Chunk èƒ½å¤Ÿ<strong>å‡å°‘ Master éœ€è¦ä¿å­˜çš„å…ƒæ•°æ®ä¿¡æ¯</strong>ï¼Œæœ‰åˆ©äºå°†æ‰€æœ‰å…ƒæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­</li>
</ul>

<p>ä¸è¿‡ï¼Œä½¿ç”¨è¾ƒå¤§å°ºå¯¸çš„ Chunk ä¹Ÿå¯èƒ½ä¼šå¸¦æ¥å…¶ä»–é—®é¢˜ï¼šå¯¹äºæ¯”è¾ƒå°çš„æ–‡ä»¶ä¼šåŒ…å«è¾ƒå°æ•°ç›®çš„ Chunkï¼Œç”šè‡³åªæœ‰ä¸€ä¸ª Chunkï¼Œå½“æœ‰è®¸å¤š Client åŒæ—¶å¯¹ä¸€ä¸ª Chunk è¿›è¡Œå¤šæ¬¡è®¿é—®æ—¶ï¼Œä¼šå¯¼è‡´<strong>å­˜å‚¨è¯¥ Chunk çš„æœåŠ¡å™¨äº§ç”Ÿçƒ­ç‚¹</strong>ã€‚</p>

<blockquote>
  <p>ç”±äº GFS ä¸­çš„æ–‡ä»¶å¤§å¤šéƒ½æ˜¯æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå› æ­¤çƒ­ç‚¹é—®é¢˜å¹¶ä¸é‡è¦ï¼›<em>ä¸ºäº†é™ä½çƒ­ç‚¹é—®é¢˜ï¼Œå¯ä»¥æé«˜ Chunk çš„å‰¯æœ¬æ•°ï¼Œæˆ–è€…å…è®¸ Client ä»å…¶ä»– Client ä¸­è¯»å–æ•°æ®</em></p>

</blockquote>

<h2 id="26-metadata">2.6-Metadata</h2>

<p>Master ä¸­ä¸»è¦å­˜å‚¨äº†ä¸‰ç§å…ƒæ•°æ®ï¼Œå¹¶ä¸”<strong>æ‰€æœ‰å…ƒæ•°æ®éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­</strong>ï¼š</p>

<ol>
  <li>æ–‡ä»¶å’Œ Chunk çš„å‘½åç©ºé—´</li>
  <li><strong>æ–‡ä»¶å’Œ Chunk çš„æ˜ å°„å…³ç³»</strong></li>
  <li>æ¯ä¸ª Chunk å‰¯æœ¬å­˜æ”¾çš„ä½ç½®ä¿¡æ¯</li>
</ol>

<p>å‰ä¸¤ç§å…ƒæ•°æ®ä¿¡æ¯ä¼šä»¥<em>è®°å½•å˜æ›´æ—¥å¿—çš„æ–¹å¼è®°å½•åœ¨æ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶ä¸­</em>ï¼Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ä¸Šï¼ŒåŒæ—¶æ—¥å¿—ä¼šè¢«å¤åˆ¶åˆ°å…¶å®ƒçš„è¿œç¨‹ Master æœåŠ¡å™¨ä¸Šï¼›ä»è€Œé™ä½ Master æœåŠ¡å™¨å´©æºƒå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é£é™©ã€‚</p>

<blockquote>
  <p>Master å¹¶ä¸ä¼šæŒä¹…åŒ– Chunk çš„ä½ç½®ä¿¡æ¯ï¼Œå½“ Master èŠ‚ç‚¹é‡æ–°å¯åŠ¨æ—¶æˆ–è€…æœ‰æ–°çš„ Chunk Server åŠ å…¥é›†ç¾¤æ—¶ï¼ŒMaster ä¼šå‘å„ä¸ª Chunk æœåŠ¡å™¨è½®è¯¢å®ƒä»¬æ‰€å­˜å‚¨çš„ Chunk ä¿¡æ¯</p>

</blockquote>

<h3 id="261-in-memory-data-structures"><em>2.6.1-In-Memory Data Structures</em></h3>

<p>ç”±äºå…ƒæ•°æ®éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ Master çš„æ“ä½œé€Ÿåº¦éå¸¸å¿«ï¼›ä½†æ˜¯è¿™ç§æ–¹å¼ä¼šä½¿å¾— Chunk çš„æ•°é‡åŠæ•´ä¸ªç³»ç»Ÿçš„æ‰¿è½½èƒ½åŠ›éƒ½å—é™äº Master çš„å†…å­˜å¤§å°ã€‚</p>

<p>ä¸ºäº†å‡å°å†…å­˜å ç”¨ï¼Œæ¯ä¸ª Chunk åªéœ€è¦ 64 ä¸ªå­—èŠ‚çš„å…ƒæ•°æ®è¿›è¡Œç®¡ç†ï¼Œæ¯ä¸ªæ–‡ä»¶çš„å‘½åç©ºé—´æ‰€éœ€è¦çš„å…ƒæ•°æ®ä¹Ÿåœ¨ 64 ä¸ªå­—èŠ‚ä»¥ä¸‹ã€‚</p>

<h3 id="262-chunk-locations"><em>2.6.2-Chunk Locations</em></h3>

<p>Master èŠ‚ç‚¹å¹¶ä¸æŒä¹…åŒ– Chunk çš„ä½ç½®ä¿¡æ¯ï¼Œåªä¼šåœ¨å†…å­˜ä¸­ç¼“å­˜è¯¥ä¿¡æ¯ã€‚</p>

<p>Master æ€»æ˜¯ç»´æŠ¤æœ€æ–°çš„ Chunk ä¿¡æ¯åˆ—è¡¨ï¼š</p>

<ul>
  <li>Master æ§åˆ¶äº† Chunk çš„ä½ç½®åˆ†é…</li>
  <li>Master æœåŠ¡å™¨å¯åŠ¨æ—¶è½®è¯¢æ‰€æœ‰çš„ Chunk æœåŠ¡å™¨ï¼Œä»¥è·å–å½“å‰ Chunk ä¿¡æ¯</li>
  <li>Master ä¸ Chunk Server ä¹‹é—´ç»´æŠ¤å‘¨æœŸæ€§çš„å¿ƒè·³ï¼Œä»¥ç›‘æ§ Chunk æœåŠ¡å™¨çš„çŠ¶æ€</li>
</ul>

<blockquote>
  <p>åªå°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­çš„è®¾è®¡ç®€åŒ–äº† Chunk Server å‘ç”Ÿå˜æ›´æ—¶ï¼ˆæ–°åŠ å…¥é›†ç¾¤ï¼Œç¦»å¼€é›†ç¾¤ï¼Œé‡å¯ï¼Œé‡å‘½åç­‰ï¼‰ï¼ŒMaster ä¸ Chunk Server ä¹‹é—´çš„æ•°æ®åŒæ­¥é—®é¢˜ã€‚</p>

</blockquote>

<h3 id="263-operation-log"><em>2.6.3-Operation Log</em></h3>

<p>æ“ä½œæ—¥å¿—åŒ…å«äº†é‡è¦å…ƒæ•°æ®çš„å˜æ›´è®°å½•ï¼Œç”¨äº Master Server çš„å®¹ç¾å¤‡ä»½ã€‚</p>

<p>ä¸ºäº†ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œ<strong>åªæœ‰åœ¨å…ƒæ•°æ®çš„å˜æ›´è®°å½•æŒä¹…åŒ–åˆ°æœ¬åœ°æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸”æŒä¹…åŒ–åˆ°å…¶ä»– Master èŠ‚ç‚¹çš„ç£ç›˜åï¼Œæ‰ä¼šå“åº” Client</strong>ã€‚</p>

<p>æœ‰äº†æ“ä½œæ—¥å¿—ï¼ŒMaster Server åœ¨æ•…éšœæ¢å¤æ—¶å¯ä»¥é€šè¿‡æ—¥å¿—æ¢å¤åˆ°æœ€è¿‘çš„ç³»ç»ŸçŠ¶æ€ã€‚ä¸ºäº†å‡å° Master æ¢å¤æ—¥å¿—çš„å¯åŠ¨æ—¶é—´ï¼Œå½“æ“ä½œæ—¥å¿—å¢é•¿åˆ°ä¸€å®šç¨‹åº¦ä¹‹åä¼šè¿›è¡Œä¸€æ¬¡ <strong>CheckPoint</strong>ï¼›æ‰€æœ‰çš„çŠ¶æ€æ•°æ®ä¼šå†™å…¥ä¸€ä¸ª CheckPoint æ–‡ä»¶ï¼Œå¹¶ä¸”æ–°çš„ CheckPoint æ–‡ä»¶åŒ…å«ä¹‹å‰çš„æ‰€æœ‰ä¿®æ”¹ã€‚å½“ Master èŠ‚ç‚¹è¿›è¡Œæ¢å¤æ—¶ï¼Œåªéœ€è¦<strong>æœ€æ–°çš„ CheckPoint æ–‡ä»¶åŠå…¶åçš„æ—¥å¿—æ–‡ä»¶å³å¯</strong>ã€‚</p>

<h2 id="27-consistency-model">2.7-Consistency Model</h2>

<p>GFS æ”¯æŒä¸€ä¸ªå®½æ¾çš„ä¸€è‡´æ€§æ¨¡å‹</p>

<ul>
  <li>å¯¹æ–‡ä»¶ NameSpace çš„ä¿®æ”¹ï¼ˆæ–‡ä»¶åˆ›å»ºï¼Œé‡å‘½åç­‰ï¼‰æ˜¯åŸå­æ€§çš„ï¼Œç”± Master èŠ‚ç‚¹ç»Ÿä¸€æ§åˆ¶ï¼š<strong>Master èŠ‚ç‚¹é€šè¿‡ NameSpace é”ä¿è¯äº†åŸå­æ€§ä¸æ­£ç¡®æ€§</strong>ï¼›åŒæ—¶æœ‰åºçš„æ“ä½œæ—¥å¿—è®°å½•äº†å˜æ›´çš„å…¨å±€é¡ºåºã€‚</li>
  <li>
    <p>å¯¹æ–‡ä»¶ Data çš„ä¿®æ”¹åˆ†ä¸ºä¸¤ç§æ“ä½œï¼š<strong>è¦†ç›–å†™</strong>ï¼ˆWriteï¼‰&amp; <strong>è®°å½•è¿½åŠ </strong>ï¼ˆRecord Appendï¼‰ï¼ˆæ–‡ä»¶æ•°æ®æ“ä½œç›´æ¥ä¸ Chunk Server äº¤äº’ï¼‰ï¼›æ–‡ä»¶å†…å®¹ä¿®æ”¹åçš„ä¸€è‡´æ€§çŠ¶æ€å–å†³äºä¿®æ”¹çš„ç±»å‹ï¼ŒæˆåŠŸä¸å¦ï¼Œæ˜¯å¦å¹¶å‘ä¿®æ”¹ç­‰ã€‚</p>

    <p><img src="/images/gfs/gfs_2.png" alt="" /></p>
  </li>
</ul>

<p>GFS å¯¹æ–‡ä»¶çŠ¶æ€æœ‰ä»¥ä¸‹å‡ ä¸ªå®šä¹‰ï¼ˆä¿®æ”¹çš„éƒ¨åˆ†ç§°ä½œ regionï¼‰ï¼š</p>

<ol>
  <li><strong><em>Consistent</em></strong>: å¦‚æœ region åœ¨ Chunk Sever çš„å¤šä¸ªå‰¯æœ¬ä¸­éƒ½ç›¸åŒï¼Œå³ Client ä»å„ä¸ªå‰¯æœ¬èƒ½è·å–ç›¸åŒçš„æ–‡ä»¶å†…å®¹ï¼Œé‚£ä¹ˆè¿™ä¸ª region è¢«ç§°ä¸ºä¸€è‡´çš„</li>
  <li><strong><em>Consistent but undefined</em></strong>: region ä¸­çš„å†…å®¹è™½ç„¶åœ¨å¤šä¸ª Chunk å‰¯æœ¬ä¸­ä¸€è‡´ï¼Œä½†æ˜¯è¯¥ region ä¸­çš„ä¿¡æ¯ä¸ Client é¢„æœŸæ›´æ–°çš„å†…å®¹å¹¶ä¸ç›¸åŒï¼›æ¯”å¦‚ Client æƒ³è¦å°†æ–‡ä»¶ä¸­çš„ä¸€æ®µå†…å®¹è®¾ç½®ä¸º abcdefgï¼Œä½†æ˜¯ç”±äºå¹¶å‘ä¿®æ”¹ç­‰åŸå› å¯¼è‡´è¯¥ region è¢«æ›´æ–°ä¸º abc123gï¼Œä¸ Client çš„é¢„æœŸä¸ä¸€è‡´</li>
  <li><strong><em>Defined</em></strong>: region åœ¨å¤šä¸ª Chunk å‰¯æœ¬ä¸­ä¿æŒä¸€è‡´ï¼Œå¹¶ä¸”ä¸ Client çš„é¢„æœŸç›¸åŒï¼ŒClient èƒ½å¤Ÿæ­£ç¡®è¯»å–æ›´æ–°çš„æ•°æ®</li>
  <li><strong><em>Inconsistent</em></strong>: ç”±äºæ›´æ–°å¤±è´¥å¯¼è‡´å¤šä¸ª Chunk å‰¯æœ¬ä¸­çš„ region ä¿¡æ¯å¹¶ä¸ä¸€è‡´</li>
</ol>

<p>å¯¹äºè¦†ç›–å†™ï¼ˆClient æŒ‡å®šå†™å…¥çš„æ–‡ä»¶åç§»ä½ç½®ï¼‰ï¼š</p>

<ol>
  <li>å½“ä¸€ä¸ª Client <em>ä¸²è¡Œä¿®æ”¹æ•°æ®æˆåŠŸ</em>åï¼Œç”±äºæ²¡æœ‰å…¶ä»– Client å¹²æ‰°ï¼Œé‚£ä¹ˆä¿®æ”¹çš„ region å°±æ˜¯å·²å®šä¹‰çš„(éšå«äº†ä¸€è‡´æ€§): æ‰€æœ‰çš„ Client éƒ½å¯ä»¥çœ‹åˆ°æ­£ç¡®å†™å…¥çš„å†…å®¹</li>
  <li>å½“å¤šä¸ª Client <em>å¹¶è¡Œä¿®æ”¹æ•°æ®æˆåŠŸ</em>åï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¯¥ region ä¸­ä¼š<strong><em>åŒ…å«æ¥è‡ªå¤šä¸ª Client ä¿®æ”¹æ“ä½œçš„ã€æ··æ‚çš„æ•°æ®ç‰‡æ®µ</em></strong>ï¼Œæ­¤æ—¶ region å¤„äºä¸€è‡´ä½†æ˜¯æœªå®šä¹‰çš„çŠ¶æ€ï¼šæ‰€æœ‰çš„ Client çœ‹åˆ°åŒæ ·çš„æ•°æ®ï¼Œä½†æ˜¯æ— æ³•æ­£ç¡®è¯»åˆ°ä»»ä½•ä¸€æ¬¡å†™å…¥æ“ä½œå†™å…¥çš„æ•°æ®</li>
  <li>å¤±è´¥çš„ä¿®æ”¹æ“ä½œå¯¼è‡´ä¸€ä¸ª region å¤„äºä¸ä¸€è‡´çŠ¶æ€(åŒæ—¶ä¹Ÿæ˜¯æœªå®šä¹‰çš„): ä¸åŒçš„ Client åœ¨ä¸åŒçš„æ—¶é—´ä¼šçœ‹åˆ°ä¸åŒçš„æ•°æ®</li>
</ol>

<p>å¯¹äºè®°å½•è¿½åŠ æ“ä½œï¼ˆæ–‡ä»¶åç§»ä½ç½®ç”± Chunk Server ä¸»å‰¯æœ¬æŒ‡å®šï¼‰ï¼š</p>

<ol>
  <li>ä¸ç®¡æ˜¯å•ç‹¬ä¸€ä¸ª Client è¿˜æ˜¯å¤šä¸ª Client å¹¶è¡Œæ‰§è¡Œæ–‡ä»¶è¿½åŠ æ“ä½œï¼Œ<em>GFS è‡³å°‘å¯ä»¥æŠŠæ•°æ®åŸå­æ€§çš„è¿½åŠ åˆ°æ–‡ä»¶ä¸­ä¸€æ¬¡ï¼Œå¹¶è¿”å›ç»™ Client ä¸€ä¸ªåç§»é‡ï¼Œè¡¨ç¤ºäº†åŒ…å«äº†å†™å…¥è®°å½•çš„ã€å·²å®šä¹‰çš„ region çš„èµ·ç‚¹ï¼›</em>æ­¤æ—¶ region å¤„äºå·²å®šä¹‰çš„çŠ¶æ€</li>
  <li>åœ¨è¿½åŠ æ“ä½œå¤±è´¥é‡è¯•æœŸé—´ï¼ˆé‡è¯•ä¹‹åå¦‚æœæˆåŠŸä¹Ÿä¼šè¢«äººä¸ºè¯¥è¿½åŠ æ“ä½œæ˜¯æˆåŠŸçš„ï¼‰ï¼ŒGFS å¯èƒ½ä¼šåœ¨<em>æ–‡ä»¶ä¸­é—´æ’å…¥å¡«å……æ•°æ®æˆ–è€…é‡å¤è®°å½•ï¼›</em>è¿™äº›æ•°æ®å æ®çš„æ–‡ä»¶ region è¢«è®¤å®šæ˜¯ä¸ä¸€è‡´çš„ï¼Œ è¿™äº›æ•°æ®é€šå¸¸æ¯”ç”¨æˆ·æ•°æ®å°çš„å¤šã€‚</li>
</ol>

<p>ç»è¿‡ä¸€ç³»åˆ—æˆåŠŸçš„ä¿®æ”¹æ“ä½œåï¼ŒGFSç¡®ä¿è¢«ä¿®æ”¹çš„æ–‡ä»¶regionæ˜¯å·²å®šä¹‰çš„ï¼Œä¸”åŒ…å«æœ€åä¸€æ¬¡ä¿®æ”¹æ“ä½œçš„æ•°æ®ã€‚</p>

<h1 id="3-system-interactions">3-System Interactions</h1>

<p>ç³»ç»Ÿè®¾è®¡æ—¶å°½é‡å‡å°‘ä¸ Master èŠ‚ç‚¹çš„äº¤äº’ï¼Œé™ä½å…¶è´Ÿè½½ã€‚</p>

<h2 id="31-leases-and-mutation-order">3.1-Leases and Mutation Order</h2>

<p>ä¸ºäº†ä¿è¯æ–‡ä»¶çš„å˜æ›´é¡ºåºåœ¨å¤šä¸ª Chunk å‰¯æœ¬ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œå¼•å…¥äº† <strong>Lease æœºåˆ¶</strong>ã€‚</p>

<blockquote>
  <p>æ¯æ¬¡å˜æ›´éƒ½éœ€è¦æŒ‰åºåœ¨æ‰€æœ‰ Chunk å‰¯æœ¬ä¸Šæ‰§è¡Œï¼Œæ‰èƒ½ä¿è¯æ–‡ä»¶çš„ä¸€è‡´æ€§</p>

  <ul>
    <li>Master èŠ‚ç‚¹ä¸ä¸€ä¸ª Chunk å‰¯æœ¬å»ºç«‹ Leaseï¼Œè¯¥å‰¯æœ¬è¢«ç§°ä¸ºä¸» Chunk</li>
    <li><em>ä¸» Chunk ä¼šå¯¹æ‰€æœ‰ Chunk çš„æ›´æ–°æ“ä½œè¿›è¡Œåºåˆ—åŒ–</em>ï¼Œæ‰€æœ‰å‰¯æœ¬éƒ½ä¼šæŒ‰ç…§è¿™ä¸ªåºåˆ—è¿›è¡Œæ“ä½œ</li>
  </ul>
</blockquote>

<p>å¼•å…¥äº† Lease æœºåˆ¶åï¼Œæ–‡ä»¶æ›´æ–°çš„å…¨å±€é¡ºåºä¸ºï¼š<strong>é¦–å…ˆç”± Master èŠ‚ç‚¹é€‰æ‹© Lease çš„é¡ºåº
å†³å®šï¼Œç„¶åç”± Lease ä¸­ä¸» Chunk åˆ†é…çš„åºåˆ—å·å†³å®š</strong>ã€‚</p>

<p>å¼•å…¥ Lease æœºåˆ¶æœ‰åŠ©äºå‡å°‘ Master èŠ‚ç‚¹çš„ç®¡ç†è´Ÿè½½ï¼›Lease åˆå§‹å€¼æ˜¯ 60sï¼Œå½“ Chunk æ›´æ–°æ—¶ï¼ŒLease å¯ä»¥å»¶é•¿ã€‚</p>

<blockquote>
  <p>Lease çš„å»ºç«‹ or å»¶é•¿ or å–æ¶ˆç­‰æ“ä½œä¿¡æ¯å‡æ”¾åœ¨ Master èŠ‚ç‚¹ä¸ Chunk Server ä¹‹é—´ç»´æŠ¤çš„å¿ƒè·³ä¸­</p>

</blockquote>

<p>Client è¿›è¡Œæ–‡ä»¶æ›´æ–°æ“ä½œçš„æµç¨‹å¦‚ä¸‹ï¼š</p>

<p><img src="/images/gfs/gfs_3.png" alt="" /></p>

<ol>
  <li>
    <p>Client è¯·æ±‚ Master è·å–æŒæœ‰ Lease çš„ Chunk ä»¥åŠå…¶ä»– Chunk å‰¯æœ¬ä¿¡æ¯</p>

    <blockquote>
      <p>å¦‚æœæš‚æ—¶æ²¡æœ‰ä¸€ä¸ª Chunk æŒæœ‰ Leaseï¼Œåˆ™ Master èŠ‚ç‚¹ä» Chunk å‰¯æœ¬ä¸­é€‰æ‹©ä¸€ä¸ªå»ºç«‹ Lease</p>

    </blockquote>
  </li>
  <li>
    <p>Master å°†ä¸» Chunk ä¿¡æ¯åŠå…¶ä»–å‰¯æœ¬ä¿¡æ¯è¿”å›ç»™ Client</p>

    <blockquote>
      <p>Client ç¼“å­˜è¿™äº›æ•°æ®ä»¥ä¾¿åç»­ä½¿ç”¨ï¼›å¹¶ä¸”åªæœ‰åœ¨ä¸» Chunk ä¸å¯ç”¨ï¼Œæˆ–è€…ä¸» Chunk å›å¤ä¿¡æ¯è¡¨æ˜å®ƒå·²ä¸å†æŒæœ‰ Lease çš„æ—¶å€™ï¼ŒClient æ‰éœ€è¦é‡æ–°ä¸ Master äº¤äº’</p>

    </blockquote>
  </li>
  <li>
    <p>Client æŠŠéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶æ•°æ®æ¨é€åˆ°æ‰€æœ‰ Chunk å‰¯æœ¬ä¸Š</p>

    <blockquote>
      <p>æ¨é€çš„å‰¯æœ¬é¡ºåºå¯ä»¥ä»»æ„ï¼Œå¯ä»¥æ ¹æ®ç½‘ç»œæ‹“æ‰‘æƒ…å†µè¿›è¡Œæ¨é€ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå“ªä¸ªæ˜¯ä¸» Chunkï¼›Chunk Server æ¥æ”¶åˆ°æ•°æ®å¹¶ä¿å­˜åœ¨å…¶å†…éƒ¨ LRU ç¼“å­˜ä¸­ï¼Œç›´åˆ°æ•°æ®è¢«ä½¿ç”¨æˆ–è€…è¿‡æœŸ</p>

    </blockquote>
  </li>
  <li>
    <p>å½“æ‰€æœ‰çš„ Chunk å‰¯æœ¬éƒ½ç¡®è®¤æ”¶åˆ°æ•°æ®ä¹‹åï¼ŒClient å†æ¬¡å‘é€å†™è¯·æ±‚åˆ°ä¸» Chunk</p>

    <blockquote>
      <p>è¯¥å†™è¯·æ±‚ä¸­æ ‡è¯†äº†ä¹‹å‰æ¨é€çš„æ•°æ®ä¿¡æ¯ï¼›ä¸» Chunk æ”¶åˆ°è¯¥å†™è¯·æ±‚åï¼Œä¸ºå…¶åˆ†é…ä¸€ä¸ªæ“ä½œåºåˆ—å·ï¼ˆæ‰€æœ‰ Client è¯·æ±‚ä¼šè¢«åˆ†é…è¿ç»­çš„åºåˆ—å·ï¼‰ï¼Œè¯¥åºåˆ—å·ä¿è¯äº†æ“ä½œçš„é¡ºåºï¼›ä¹‹åï¼Œä¸» Chunk æŒ‰ç…§æ“ä½œåºåˆ—ä¾æ¬¡å°†å˜æ›´æ“ä½œåº”ç”¨åˆ°æœ¬åœ°ï¼Œå¹¶æ›´æ–°è‡ªèº«è®°å½•çŠ¶æ€</p>

    </blockquote>
  </li>
  <li>ä¸» Chunk æŠŠå˜æ›´è¯·æ±‚å‘é€åˆ°å…¶ä»–å‰¯æœ¬ä¸­ï¼›æ¯ä¸ªå‰¯æœ¬ä¾ç…§ä¸» Chunk åˆ†é…çš„åºåˆ—å·ä»¥ç›¸åŒçš„é¡ºåºæ‰§è¡Œ</li>
  <li>å…¶ä»–å‰¯æœ¬æ‰§è¡Œå®Œæˆåï¼Œå›å¤ä¸» Chunk</li>
  <li>
    <p>ä¸» Chunk å°†å˜æ›´æ“ä½œçš„ç»“æœè¿”å›ç»™ Client</p>

    <blockquote>
      <p>ä»»ä½•å‰¯æœ¬äº§ç”Ÿçš„ä»»ä½•é”™è¯¯éƒ½ä¼šè¿”å› Clientï¼›åœ¨å‡ºç°é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œå˜æ›´æ“ä½œå¯èƒ½åœ¨ä¸» Chunk å’Œä¸€äº›äºŒçº§å‰¯æœ¬ä¸­æ‰§è¡ŒæˆåŠŸï¼Œï¼ˆå¦‚æœæ“ä½œåœ¨ä¸» Chunk ä¸Šå¤±è´¥äº†ï¼Œæ“ä½œå°±ä¸ä¼šè¢«åˆ†é…åºåˆ—
 å·ï¼Œä¹Ÿä¸ä¼šè¢«ä¼ é€’ï¼‰é‚£ä¹ˆ Client çš„è¯·æ±‚è¢«ç¡®è®¤ä¸ºå¤±è´¥ï¼Œè¢«ä¿®æ”¹çš„ region å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚Client é€šè¿‡é‡å¤æ‰§è¡Œå¤±è´¥çš„æ“ä½œæ¥å¤„ç†è¿™æ ·çš„é”™è¯¯ã€‚åœ¨ä»å¤´å¼€å§‹é‡å¤æ‰§è¡Œä¹‹å‰ï¼Œå®¢æˆ·æœºä¼šå…ˆä» 3 â†’ 7 åšå‡ æ¬¡å°è¯•ã€‚</p>

    </blockquote>
  </li>
</ol>

<p>åœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œå¦‚æœä¸€æ¬¡å˜æ›´æ“ä½œå†™å…¥çš„æ•°æ®é‡å¾ˆå¤§ï¼Œæˆ–è€…æ•°æ®è·¨è¶Šäº†å¤šä¸ª Chunkï¼Œé‚£ä¹ˆ GFS Client ä¼šå°†å…¶æ‹†åˆ†æˆå¤šä¸ªå†™å…¥æ“ä½œã€‚</p>

<h2 id="32-data-flow">3.2-Data Flow</h2>

<p>ä¸ºäº†æé«˜ç½‘ç»œæ•ˆç‡ï¼ŒGFS å°†æ•°æ®æµä¸æ§åˆ¶æµåˆ†å¼€ã€‚</p>

<p><strong>æ§åˆ¶æµ</strong>ï¼šClient å°†å˜æ›´è¯·æ±‚å‘é€åˆ°ä¸» Chunk Serverï¼Œä¸» Chunk æŠŠè¯¥è¯·æ±‚åŒæ­¥åˆ°å…¶ä»– Chunk å‰¯æœ¬ä¸­é¡ºåºæ‰§è¡Œã€‚</p>

<p><strong>æ•°æ®æµ</strong>ï¼šClient æŠŠæ–‡ä»¶æ•°æ®æ¨é€åˆ°æ‰€æœ‰ Chunk å‰¯æœ¬ä¸Šï¼ˆæ­¤æ—¶ä¸éœ€è¦å…³å¿ƒå“ªä¸ªæ˜¯ä¸» Chunkï¼‰ã€‚</p>

<p>åœ¨æ•°æ®æµæ¨é€æ—¶ï¼Œä¸ºäº†æé«˜æœºå™¨çš„å¸¦å®½åˆ©ç”¨ç‡ï¼ŒåŒæ—¶å‡å°‘æ•°æ®æ¨é€çš„å»¶è¿Ÿï¼Œ<strong>æ•°æ®æ²¿ç€ä¸€ä¸ª Chunk  Server é“¾é¡ºåºæ¨é€</strong>ï¼Œè€Œä¸æ˜¯ä»¥å…¶å®ƒæ‹“æ‰‘å½¢å¼åˆ†æ•£æ¨é€(å¦‚æ ‘å‹æ‹“æ‰‘ç»“æ„)ã€‚</p>

<blockquote>
  <p>çº¿æ€§æ¨é€æ¨¡å¼ä¸‹ï¼Œæ¯å°æœºå™¨æ‰€æœ‰çš„å‡ºå£å¸¦å®½éƒ½ç”¨äºä»¥æœ€å¿«çš„é€Ÿåº¦ä¼ è¾“æ•°æ®ï¼Œè€Œä¸æ˜¯åœ¨å¤šä¸ªæ¥å—è€…ä¹‹é—´åˆ†é…å¸¦å®½</p>
</blockquote>

<p>åœ¨æ¨é€æ—¶ï¼Œå°½é‡é€‰æ‹©ä¸€å°è¿˜æ²¡æœ‰æ¥æ”¶æ•°æ®ï¼Œå¹¶ä¸”ç¦»è‡ªå·±æœ€è¿‘çš„ Chunk Serverã€‚</p>

<h2 id="33-atomic-record-appends">3.3-Atomic Record Appends</h2>

<p>GFS æä¾›äº†ä¸€ä¸ªåŸå­è®°å½•è¿½åŠ çš„æ“ä½œæ–¹å¼ã€‚</p>

<p>å¯¹äºä¼ ç»Ÿè¦†ç›–å†™çš„æ–¹å¼ï¼ŒClient éœ€è¦æŒ‡å®šå†™å…¥ä½ç½®çš„åç§»é‡ï¼›å¦‚æœå¯¹åŒä¸€ä¸ª region è¿›è¡Œå¹¶å‘å†™ï¼Œå¯èƒ½ä¼šå¯¼è‡´ region çš„å°¾éƒ¨åŒ…å«å¤šä¸ª Client å†™å…¥çš„æ•°æ®ç‰‡æ®µã€‚</p>

<blockquote>
  <p>å¯¹äºè¦†ç›–å†™ï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œéœ€è¦é¢å¤–çš„åŒæ­¥æœºåˆ¶ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼é”ï¼Œç”¨äºç¡®ä¿æ•°æ®èƒ½å¤Ÿå®Œæ•´åœ°å†™å…¥</p>
</blockquote>

<p>ä½¿ç”¨è®°å½•è¿½åŠ çš„æ–¹å¼ï¼ŒClient åªéœ€è¦æŒ‡å®šå†™å…¥çš„æ•°æ®ï¼Œè‡³äºå†™å…¥çš„åç§»é‡ç”± GFS æ‰§è¡Œï¼›GFS ä¿è¯è‡³å°‘æœ‰ä¸€æ¬¡åŸå­å†™å…¥æ“ä½œæ‰§è¡ŒæˆåŠŸï¼ˆå³å°†æ–‡ä»¶æ•°æ®æ­£ç¡®åœ°è¿½åŠ ï¼‰ã€‚å†™å…¥çš„æ•°æ®è¿½åŠ åˆ° GFS æŒ‡å®šçš„åç§»é‡å¤„ï¼Œä¹‹åå†å°†è¯¥åç§»é‡è¿”å›ç»™ Clientã€‚</p>

<p>å¦‚æœè¿½åŠ æ“ä½œåœ¨ä»»ä½•ä¸€ä¸ªå‰¯æœ¬ä¸Šæ‰§è¡Œå¤±è´¥äº†ï¼ŒClient éœ€è¦è¿›è¡Œé‡è¯•ã€‚ç”±äºé‡è¯•æœºåˆ¶ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´åŒä¸€ä¸ª Chunk åœ¨ä¸åŒå‰¯æœ¬ä¸Šçš„æ•°æ®ä¸ä¸€è‡´ï¼šæœ‰çš„å‰¯æœ¬å¯èƒ½åŒ…å«é‡å¤çš„æ•°æ®è®°å½•ã€‚</p>

<p><strong>GFS ä¸ä¿è¯æ‰€æœ‰çš„Chunk å‰¯æœ¬åœ¨ Byte çº§åˆ«ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œåªä¿è¯æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“è‡³å°‘è¢«åŸå­åœ°å†™å…¥ä¸€æ¬¡</strong>ï¼ˆå¯èƒ½ä¼šå¤±è´¥é‡è¯•ï¼‰ã€‚</p>

<h1 id="4-master-operation">4-Master Operation</h1>

<p>Master èŠ‚ç‚¹æ‰§è¡Œçš„æ“ä½œæœ‰ï¼š</p>

<ol>
  <li>æ–‡ä»¶ NameSpace ç›¸å…³çš„æ‰€æœ‰æ“ä½œ</li>
  <li>Chunk å‰¯æœ¬ç®¡ç†
    <ul>
      <li>Chunk çš„å­˜å‚¨ä½ç½®</li>
      <li>åˆ›å»ºæ–°çš„ Chunk åŠç›¸å…³å‰¯æœ¬</li>
      <li>Chunk Server ä¹‹é—´çš„è´Ÿè½½å‡è¡¡</li>
      <li>å›æ”¶ä¸å†ä½¿ç”¨çš„å­˜å‚¨ç©ºé—´</li>
      <li>â€¦</li>
    </ul>
  </li>
</ol>

<h2 id="41-namespace-management-and-locking">4.1-Namespace Management and Locking</h2>

<p>GFS çš„ NameSpace å°±æ˜¯ä¸€ä¸ª<strong>å…¨è·¯å¾„ä¸å…ƒæ•°æ®ï¼ˆMetaDataï¼‰çš„æ˜ å°„</strong>è¡¨ã€‚é€šè¿‡ä½¿ç”¨å‰ç¼€å‹ç¼©ï¼Œé™ä½å†…å­˜å ç”¨ã€‚</p>

<p>å‰ç¼€æ ‘çš„<strong><em>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå³æ–‡ä»¶ or ç›®å½•è·¯å¾„ï¼‰éƒ½æœ‰å…³è”ä¸€ä¸ªè¯»å†™é”</em></strong>ã€‚æ¯ä¸ª Master æ“ä½œéƒ½éœ€è¦å…ˆè·å–ä¸€ç³»åˆ—é”ï¼Œæ¯”å¦‚ä¸€ä¸ªæ“ä½œæ¶‰åŠåˆ° /a/b/c è·¯å¾„ï¼Œåˆ™é¦–å…ˆéœ€è¦è·å–åˆ° /a, /a/b èŠ‚ç‚¹çš„è¯»é”ï¼ŒåŒæ—¶è¦è·å–åˆ° /a/b/c èŠ‚ç‚¹çš„è¯»å†™é”ã€‚</p>

<blockquote>
  <p>æ–‡ä»¶çš„åˆ›å»ºæ“ä½œä¸éœ€è¦è·å–çˆ¶ç›®å½•çš„å†™é”ï¼Œåªéœ€è¦è¯»é”å³å¯</p>
</blockquote>

<p>é‡‡ç”¨è¿™ç§é”æ–¹æ¡ˆå¯ä»¥<em>æ”¯æŒå¯¹åŒä¸€ä¸ªç›®å½•ä¸‹çš„å¹¶è¡Œæ“ä½œ</em>ï¼›æ¯”å¦‚åŒä¸€ä¸ªç›®å½•ä¸‹ï¼ˆ/root/kzï¼‰åŒæ—¶åˆ›å»ºå¤šä¸ªæ–‡ä»¶(a,b,c)ï¼šæ¯ä¸ªåˆ›å»ºæ–‡ä»¶çš„æ“ä½œéƒ½éœ€è¦è·å–ç›®å½• /root, /root/kz çš„è¯»é”ï¼Œä»¥åŠè¦åˆ›å»ºçš„æ–‡ä»¶å(a,b,c)çš„å†™é”ã€‚</p>

<blockquote>
  <p>åˆ›å»ºæ–‡ä»¶æ—¶å¯¹ç›®å½•è¯»é”çš„è·å–è¶³å¤Ÿé˜²æ­¢ç›®å½•è¢«åˆ é™¤ï¼Œé‡å‘½åç­‰æ›´æ–°æ“ä½œï¼Œå¯¹æ–‡ä»¶çš„å†™é”ç”¨äºé˜²æ­¢ç›¸åŒåç§°çš„æ–‡ä»¶å¤šæ¬¡åˆ›å»º</p>
</blockquote>

<h2 id="42-replica-placement">4.2-Replica Placement</h2>

<p>Chunk å‰¯æœ¬ä½ç½®çš„é€‰æ‹©æœ‰ä¸¤ä¸ªç›®æ ‡ï¼š</p>

<ul>
  <li>æœ€å¤§åŒ–æ•°æ®å¯é æ€§ä¸å¯ç”¨æ€§</li>
  <li>æœ€å¤§åŒ–ç½‘ç»œå¸¦å®½åˆ©ç”¨ç‡</li>
</ul>

<p>ä¸ºäº†å®ç°è¿™ä¸¤ä¸ªç›®æ ‡ï¼Œä»…ä»…å°†å‰¯æœ¬åˆ†æ•£åœ¨å¤šä¸ªæœºå™¨ä¸Šæ˜¯ä¸å¤Ÿçš„ï¼Œè¿™åªèƒ½é¢„é˜²æœºå™¨æŸåå¸¦æ¥çš„å½±å“åŠæœ€å¤§åŒ–æ²¡å°æœºå™¨çš„å¸¦å®½åˆ©ç”¨ç‡ã€‚å› æ­¤ï¼Œéœ€è¦åœ¨å¤šä¸ªæœºæ¶ä¹‹é—´åˆ†å¸ƒå­˜å‚¨ Chunk å‰¯æœ¬ã€‚è¿™æ ·å³ä½¿ä¸€ä¸ªæœºæ¶ä¸Šçš„æœºå™¨å…¨éƒ¨æŸåï¼ŒChunk ä»ç„¶æ˜¯å¯ç”¨çš„ï¼›ç½‘ç»œå¸¦å®½æ–¹é¢èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨æœºæ¶çš„å¸¦å®½æ•´åˆã€‚</p>

<h2 id="43-creation--re-replication--rebalancing">4.3-Creation &amp; Re-replication &amp; Rebalancing</h2>

<p>Chunk å‰¯æœ¬çš„åˆ›å»ºæœ‰ä¸‰ä¸ªåŸå› ï¼šæ–°å»º &amp; é‡æ–°å¤åˆ¶ &amp; é‡æ–°è´Ÿè½½å‡è¡¡ã€‚</p>

<h3 id="431-creation"><em>4.3.1-Creation</em></h3>

<p>å½“<strong><em>æ–°å»º</em></strong>ä¸€ä¸ª Chunk æ—¶ï¼ŒMaster éœ€è¦é€‰æ‹©è¯¥ Chunk å­˜æ”¾çš„æœºå™¨ï¼Œéœ€è¦è€ƒè™‘çš„å› ç´ æœ‰ï¼š</p>

<ul>
  <li><em>è¯¥ Chunk Server çš„ç£ç›˜ä½¿ç”¨ç‡ä½äºå¹³å‡ç£ç›˜ä½¿ç”¨ç‡</em>ï¼Œç”¨äºæœ€ç»ˆå¹³è¡¡ Chunk Servers ä¹‹é—´çš„ç£ç›˜ä½¿ç”¨ç‡</li>
  <li><em>è¯¥ Chunk Server æœ€è¿‘åˆ›å»º Chunk çš„æ¬¡æ•°åœ¨é™åˆ¶ä¹‹å†…</em>ï¼›è™½ç„¶åˆ›å»º Chunk æ“ä½œæ˜¯å»‰ä»·çš„ï¼Œä½†æ˜¯åˆ›å»º Chunk ä¹‹åæ„å‘³ç€åœ¨ä¸ä¹…ä¹‹åä¼šæœ‰å¤§é‡æ•°æ®å†™å…¥è¯¥ Chunkï¼Œæ‰€ä»¥è¦å¯¹ Chunk Server ä¸€æ®µæ—¶é—´å†…åˆ›å»º Chunk çš„æ¬¡æ•°è¿›è¡Œé™åˆ¶</li>
  <li>å¦‚ 4.2 æè¿°çš„ï¼Œæˆ‘ä»¬éœ€è¦å°† Chunk åˆ†æ•£åœ¨ä¸åŒçš„æœºæ¶ä¸Š</li>
</ul>

<h3 id="432-re-replication"><em>4.3.2-Re-replication</em></h3>

<p>å½“ Chunk çš„æœ‰æ•ˆå‰¯æœ¬æ•°å°äºç”¨æˆ·æŒ‡å®šçš„å¤åˆ¶å› æ•°æ—¶ï¼ŒMaster éœ€è¦å¯¹ Chunk è¿›è¡Œ<strong><em>é‡æ–°å¤åˆ¶</em></strong>ã€‚å‡ºç°è¿™ä¸ªç°è±¡çš„åŸå› æœ‰ï¼š</p>

<ul>
  <li>ä¸€ä¸ª Chunk Server ä¸å¯ç”¨</li>
  <li>Chunk Server ä¸ŠæŠ¥å…¶å­˜å‚¨çš„ä¸€ä¸ªå‰¯æœ¬æŸå</li>
  <li>Chunk Server çš„ä¸€ä¸ªç£ç›˜æŸå</li>
  <li>Chunk çš„å¤åˆ¶å› æ•°æé«˜äº†</li>
  <li>â€¦</li>
</ul>

<p>åŒä¸€æ—¶é—´å¯èƒ½æœ‰å¤šä¸ª Chunk éœ€è¦è¢«é‡æ–°å¤åˆ¶ï¼ŒMaster éœ€è¦æ ¹æ®ä¸€äº›å› ç´ å¯¹ Chunk è¿›è¡Œä¼˜å…ˆçº§æ’åºï¼Œä¹‹åé€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„ Chunk è¿›è¡Œå¤åˆ¶ã€‚</p>

<ul>
  <li>Master å‘½ä»¤ä¸€ä¸ªå¯ç”¨çš„ Chunk Server ç›´æ¥ä»å¯ç”¨çš„å‰¯æœ¬å…‹éš†ä¸€ä¸ªå‡ºæ¥ï¼Œä¹‹åå†ä¼ è¾“åˆ°æ–°å‰¯æœ¬ä¸­ï¼›æ–°å‰¯æœ¬çš„é€‰æ‹©ä¸åˆ›å»º Chunk æ—¶ç±»ä¼¼</li>
</ul>

<h3 id="433-rebalancing"><em>4.3.3-Rebalancing</em></h3>

<p>Master éœ€è¦å‘¨æœŸæ€§çš„å¯¹ Chunk å‰¯æœ¬è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼šé¦–å…ˆæ£€æŸ¥å½“å‰çš„å‰¯æœ¬åˆ†å¸ƒæƒ…å†µï¼Œä¹‹åå†<strong><em>ç§»åŠ¨å‰¯æœ¬</em></strong>ä»¥æ›´å¥½åœ°åˆ©ç”¨æœºå™¨çš„ç£ç›˜ç©ºé—´ï¼Œæ›´å¥½åœ°è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</p>

<p>åœ¨ç¡®å®šéœ€è¦ç§»åŠ¨çš„å‰¯æœ¬æ—¶ï¼Œé€‰æ‹© Chunk Server å‰©ä½™ç©ºé—´ä½äºå¹³å‡å€¼çš„ Chunk å‰¯æœ¬ï¼›æ–°å‰¯æœ¬çš„ä½ç½®é€‰æ‹©ä¸åˆ›å»ºæ—¶ç±»ä¼¼ã€‚</p>

<h2 id="44-garbage-collection">4.4-Garbage Collection</h2>

<p>GFS åœ¨æ–‡ä»¶åˆ é™¤åå¹¶ä¸ä¼šç«‹å³å›æ”¶ Chunk çš„ç‰©ç†ç©ºé—´ï¼Œè€Œæ˜¯é‡‡ç”¨æƒ°æ€§åˆ é™¤çš„ç­–ç•¥ï¼›<em>åªæœ‰åœ¨æ–‡ä»¶ &amp; Chunk çº§çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¸­æ‰ä¼šå›æ”¶å…¶ç‰©ç†ç©ºé—´</em>ã€‚</p>

<h3 id="441-mechanism"><em>4.4.1-Mechanism</em></h3>

<ul>
  <li>
    <p>å½“ä¸€ä¸ªæ–‡ä»¶è¢«ç”¨æˆ·åˆ é™¤æ—¶ï¼ŒMaster èŠ‚ç‚¹å¹¶ä¸ä¼šç«‹å³å›æ”¶æ–‡ä»¶èµ„æºï¼Œè€Œæ˜¯<em>å°†æ–‡ä»¶åæ›´æ–°ä¸ºåŒ…å«åˆ é™¤æ—¶é—´æˆ³ &amp; éšè—çš„åå­—</em>ã€‚</p>

    <blockquote>
      <p>åˆ é™¤åŠ¨ä½œåŒæ ·ä¼šè®°å½•åˆ° Master çš„æ“ä½œæ—¥å¿—ä¸­ï¼›åœ¨æ–‡ä»¶çœŸæ­£è¢«åˆ é™¤ä¹‹å‰ï¼Œä»ç„¶å¯ä»¥é€šè¿‡æ›´æ–°åçš„ç‰¹æ®Šæ–‡ä»¶åè¿›è¡Œè®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŠŠç‰¹æ®Šæ–‡ä»¶åä¿®æ”¹å›åŸæ¥çš„æ–‡ä»¶åè¿›è¡Œæ–‡ä»¶æ¢å¤</p>
    </blockquote>
  </li>
  <li>
    <p>Master èŠ‚ç‚¹å¯¹æ–‡ä»¶ç³»ç»Ÿçš„ NameSpace åšå®šæœŸæ‰«ææ—¶ï¼Œä¼šåˆ é™¤ä¸‰å¤©å‰çš„æ‰€æœ‰éšè—æ–‡ä»¶ã€‚</p>
  </li>
  <li>
    <p>å½“éšè—æ–‡ä»¶ä» NameSpace ä¸­åˆ é™¤åï¼Œ<em>Master æ‰ä¼šå°†å†…å­˜ä¸­ä¸è¿™ä¸ªæ–‡ä»¶ç›¸å…³çš„å…ƒæ•°æ®åˆ é™¤ï¼Œä»è€Œåˆ‡æ–­åˆ é™¤æ–‡ä»¶ä¸å®ƒæ‰€åŒ…å«çš„ Chunk ä¹‹é—´çš„è¿æ¥</em>ã€‚</p>

    <blockquote>
      <p>åœ¨å¯¹ NameSpace è¿›è¡Œæ‰«ææ—¶ï¼ŒMaster ä¼šæ‰¾åˆ°å­¤å„¿ Chunkï¼ˆä¸è¢«ä»»ä½•æ–‡ä»¶åŒ…å«çš„ Chunkï¼‰ï¼Œå¹¶åˆ é™¤å®ƒä»¬çš„å…ƒæ•°æ®</p>
    </blockquote>
  </li>
  <li>
    <p>Chunk Server åœ¨ä¸ Master å‘¨æœŸçš„å¿ƒè·³äº¤äº’ä¸­ï¼Œä¼šä¸ŠæŠ¥å…¶åŒ…å«çš„ Chunk å­é›†ä¿¡æ¯ã€‚<em>Master ä¼šå‘¨çŸ¥ Chunk Server å“ªäº› Chunk çš„å…ƒæ•°æ®å·²ç»è¢«åˆ é™¤äº†</em>ï¼›ä¹‹åï¼ŒChunk Server å¯ä»¥ä»»æ„åˆ é™¤è¿™äº› Chunk å‰¯æœ¬ã€‚</p>
  </li>
</ul>

<h3 id="442-discussion"><em>4.4.2-Discussion</em></h3>

<p>åƒåœ¾å›æ”¶ç­–ç•¥ç›¸å¯¹äºç›´æ¥åˆ é™¤æ–‡ä»¶æœ‰å‡ ä¸ªä¼˜åŠ¿ï¼š</p>

<ol>
  <li>å¯¹äºç»„ä»¶å¤±æ•ˆæ˜¯å¸¸æ€çš„å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œåƒåœ¾å›æ”¶çš„æ–¹å¼æ›´åŠ ç®€å•å¯é 
    <ol>
      <li>åœ¨ Chunk åˆ›å»ºæ—¶ï¼Œæœ‰äº›å‰¯æœ¬å¯èƒ½ä¼šåˆ›å»ºæˆåŠŸï¼Œæœ‰äº›å¯èƒ½ä¼šå¤±è´¥ï¼Œåˆ›å»ºå¤±è´¥çš„å‰¯æœ¬å¤„äºæ— æ³•è¢« Master èŠ‚ç‚¹è¯†åˆ«çš„çŠ¶æ€ï¼›å‰¯æœ¬åˆ é™¤æ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ï¼ŒMaster éœ€è¦é‡æ–°å‘é€åˆ é™¤æ¶ˆæ¯</li>
      <li>åƒåœ¾å›æ”¶æä¾›äº†ä¸€è‡´çš„ï¼Œå¯é çš„æ¸…é™¤æ— ç”¨å‰¯æœ¬çš„æ–¹æ³•</li>
    </ol>
  </li>
  <li>åƒåœ¾å›æ”¶åŠ¨ä½œä¸º Master èŠ‚ç‚¹çš„å‘¨æœŸæ€§åå°è¿›ç¨‹ï¼Œå¯ä»¥åœ¨ Master èŠ‚ç‚¹ç›¸å¯¹ç©ºé—²çš„æ—¶å€™è¿›è¡Œå›æ”¶åŠ¨ä½œï¼Œå°½é‡å‡å°‘ Master èŠ‚ç‚¹çš„è´Ÿè½½</li>
  <li>å¯¹äºæ„å¤–çš„æ–‡ä»¶åˆ é™¤åŠ¨ä½œæä¾›äº†å®‰å…¨ä¿éšœ</li>
</ol>

<p>ä¸è¿‡ï¼Œå»¶è¿Ÿç©ºé—´å›æ”¶å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ï¼šåœ¨ Chunk Server å­˜å‚¨ç©ºé—´æ¯”è¾ƒç´§ç¼ºçš„æ—¶å€™ï¼Œä¼šé˜»ç¢ç”¨æˆ·å­˜å‚¨ç©ºé—´çš„è°ƒä¼˜ä½¿ç”¨ï¼›ç‰¹åˆ«æ˜¯åå¤åˆ›å»ºåˆ é™¤å¤§é‡ä¸´æ—¶æ–‡ä»¶æ—¶ã€‚ä¸ºäº†é™ä½è¿™ä¸ªå½±å“ï¼Œå¯ä»¥ä¸ºä¸åŒçš„æ–‡ä»¶è®¾ç½®ä¸åŒçš„å›æ”¶ç­–ç•¥ã€‚</p>

<h2 id="45-stale-replica-detection">4.5-Stale Replica Detection</h2>

<p>å½“ Chunk Server å¤±æ•ˆæ—¶ï¼Œä¿å­˜åœ¨å…¶ä¸­çš„ Chunk å¯èƒ½ä¼šåœ¨å…¶å¤±æ•ˆæœŸé—´é”™è¿‡ä¸€äº›ä¿®æ”¹æ“ä½œè€Œè¿‡æœŸå¤±æ•ˆã€‚</p>

<p>ä¸ºäº†åˆ¤æ–­ Chunk æ˜¯å¦æœ‰æ•ˆï¼ŒMaster èŠ‚ç‚¹ä¼šä¸ºæ¯ä¸ª Chunk ä¿å­˜å…¶ç‰ˆæœ¬å·ï¼›<strong>æ¯å½“ä¸ Chunk å‰¯æœ¬ç­¾è®¢æ–°çš„ç§Ÿçº¦æ—¶ï¼Œå°±ä¼šå¢åŠ  Chunk çš„ç‰ˆæœ¬å·</strong>ï¼Œç„¶åé€šçŸ¥æœ€æ–°çš„å‰¯æœ¬ã€‚</p>

<blockquote>
  <p>æ¯ä¸ª Chunk éƒ½ä¼šè¢«åˆ†é…å”¯ä¸€çš„æ ‡è¯†ï¼›Chunk çš„ç‰ˆæœ¬å·å¤§å°ç”¨äºåˆ¤æ–­å…¶æ˜¯å¦æœ‰æ•ˆ</p>
</blockquote>

<p>æ–°çš„ç‰ˆæœ¬å·è®°å½•ä¼šè¢« Chunk Server &amp; Master èŠ‚ç‚¹æŒä¹…åŒ–åˆ°æœ¬åœ°ã€‚</p>

<p>å½“ Chunk Server ä¸  Master å¿ƒè·³äº¤äº’æ—¶ï¼Œä¼šä¸ŠæŠ¥å…¶ä¿å­˜çš„ Chunk é›†åˆåŠå¯¹åº”çš„ç‰ˆæœ¬å·ã€‚</p>

<ul>
  <li>å½“ Master å‘ç°ä¸ŠæŠ¥ Chunk å‰¯æœ¬çš„ç‰ˆæœ¬å·æ¯”è‡ªå·±å­˜å‚¨çš„ç‰ˆæœ¬å·ä½çš„æ—¶å€™ï¼Œå°±ä¼šåˆ¤å®šè¯¥ Chunk å‰¯æœ¬å¤±æ•ˆï¼›<em>åœ¨åƒåœ¾å›æ”¶æ—¶ä¼šç§»é™¤æ‰€æœ‰è¿‡æœŸå¤±æ•ˆçš„å‰¯æœ¬</em></li>
  <li>å¦‚æœ Master å‘ç°ä¸ŠæŠ¥çš„ Chunk å‰¯æœ¬ç‰ˆæœ¬å·ä¸­æœ‰æ¯”è‡ªå·±å­˜å‚¨çš„ç‰ˆæœ¬å·é«˜çš„æ—¶å€™ï¼Œå°±ä¼šè®¤ä¸ºå®ƒå’Œ C hun</li>
</ul>

<p>å½“ Client è¯·æ±‚ Master è·å– Chunk å‰¯æœ¬ä¿¡æ¯æ—¶ï¼ŒMaster ä¸ä¼šä¸‹å‘å¤±æ•ˆçš„ Chunk å‰¯æœ¬ï¼ˆè¿™äº›å‰¯æœ¬ä¼šåœ¨åƒåœ¾å›æ”¶æ—¶ç§»é™¤ï¼‰ï¼Œå¹¶ä¸”ä¼šå‘ŠçŸ¥ Client å½“å‰ Chunk çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>

<p>Client ä¸ Chunk Server åœ¨å¯¹ Chunk è¿›è¡Œæ“ä½œå‰ä¼šéªŒè¯ Chunk æ˜¯å¦æœ‰æ•ˆã€‚</p>

<h1 id="5-fault-tolerance--diagnosis">5-Fault Tolerance &amp; Diagnosis</h1>

<h2 id="51-high-availability">5.1-High Availability</h2>

<p>ä¸ºäº†æé«˜é›†ç¾¤çš„å¯ç”¨æ€§ï¼ŒGFS ä½¿ç”¨äº†ä¸¤æ¡ç­–ç•¥ï¼šå¿«é€Ÿæ¢å¤ &amp; å¤åˆ¶</p>

<h3 id="511-fast-recovery"><em>5.1.1-Fast Recovery</em></h3>

<p>Master &amp; Chunk Server åœ¨å…³é—­ä¹‹åèƒ½å¤Ÿåœ¨å‡ ç§’å†…é‡æ–°å¯åŠ¨æ¢å¤ï¼›é‡å¯æœŸé—´ï¼Œå·²ç»å»ºç«‹çš„è¯·æ±‚ä¼šè¶…æ—¶ï¼Œä¹‹åä¼šè®¿é—®æ–°çš„èŠ‚ç‚¹è¿›è¡Œé‡è¯•ã€‚</p>

<blockquote>
  <p>Master èŠ‚ç‚¹å­˜åœ¨å¤šä¸ªå†—ä½™ï¼Œå¹¶ä¸” Master çš„æ“ä½œæ—¥å¿—ä¼šå®šæ—¶åˆ›å»º Check Pointï¼›Chunk Server ä¹Ÿä¼šå®šæ—¶åˆ›å»ºå¿«ç…§</p>
</blockquote>

<h3 id="512-chunk-replication"><em>5.1.2-Chunk Replication</em></h3>

<p>æ¯ä¸ª Chunk éƒ½ä¼šè¢«å¤åˆ¶åˆ°ä¸åŒæœºæ¶ä¸Šçš„ä¸åŒæœºå™¨ä¸­ï¼Œå¤åˆ¶å› å­é»˜è®¤ä¸º 3.</p>

<p>å½“ Chunk Server ç¦»çº¿ï¼Œæˆ–è€…é€šè¿‡æ ¡éªŒå‘ç°æŸä¸€ä¸ª Chunk çš„æ•°æ®å·²è¢«æŸåï¼ŒMaster é€šè¿‡é‡æ–°å…‹éš†æœ€æ–°å‰¯æœ¬æ¥ä¿è¯æ¯ä¸ª Chunk æ•°æ®çš„å®Œæ•´æ€§ã€‚</p>

<h3 id="513-master-replication"><em>5.1.3-Master Replication</em></h3>

<p>è™½ç„¶ GFS ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ª Master èŠ‚ç‚¹è¿›è¡Œäº¤äº’ï¼Œä½†æ˜¯ä¸ºäº†æé«˜ Master çš„å†—ä½™ï¼Œéœ€è¦å°† Master çš„çŠ¶æ€å¤åˆ¶åˆ°å…¶ä»– Master Server ä¸Šã€‚</p>

<p>å¦‚æœå½“å‰ Master èŠ‚ç‚¹å¤±æ•ˆäº†ï¼Œå¤„äº GFS ç³»ç»Ÿä¹‹å¤–çš„ç›‘æ§è¿›ç¨‹ä¼š<em>é€‰æ‹©å…¶ä»–ä¿å­˜å®Œæ•´æ“ä½œæ—¥å¿—çš„ Mater Server å¯åŠ¨ä¸€ä¸ªæ–°çš„ Master è¿›ç¨‹</em>ï¼›ä¹‹å Client çš„è®¿é—®ä¼šè¯·æ±‚åˆ°æ–°çš„ Master èŠ‚ç‚¹ä¸Šã€‚</p>

<blockquote>
  <p>GFS  ä¸­ Master çš„ä¸»èŠ‚ç‚¹é€‰æ‹©ä¸æ˜¯åˆ©ç”¨ Raft ç­‰ä¸€è‡´æ€§ç®—æ³•ï¼Œè€Œæ˜¯å…¶ä»–ç›‘æ§è¿›ç¨‹è¿›è¡Œåˆ¤æ–­é€‰æ‹©</p>
</blockquote>

<p>Master èŠ‚ç‚¹é™¤äº†æœ‰å¤‡ä»½èŠ‚ç‚¹ï¼Œè¿˜å­˜åœ¨<strong>å½±å­èŠ‚ç‚¹</strong>ï¼šå½±å­ Master ä¸­çš„çŠ¶æ€ä¼šæ¯” Master ä¸»èŠ‚ç‚¹æ…¢ä¸€äº›ï¼ˆMaster å¤‡ä»½èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹ä¿æŒåŒæ­¥ï¼‰ï¼›<em>ç”¨äºåœ¨ Master çš„ä¸»èŠ‚ç‚¹å¤±æ•ˆä¹‹åæä¾›æ–‡ä»¶ç³»ç»Ÿçš„åªè¯»åŠŸèƒ½</em>ã€‚</p>

<blockquote>
  <p>å½±å­èŠ‚ç‚¹ä¼šå®šæ—¶ä» Master ä¸»èŠ‚ç‚¹æ‹‰å–æœ€æ–°çš„æ“ä½œæ—¥å¿—å¹¶åº”ç”¨åˆ°è‡ªèº«çŠ¶æ€ä¸­ï¼Œå¹¶ä¸”ä¹Ÿä¼šå®šæ—¶ä¸ Chunk Server äº¤äº’è·å– Chunk ä¿¡æ¯</p>
</blockquote>

<h2 id="52-data-integrity">5.2-Data Integrity</h2>

<p>æ¯ä¸ª Chunk Server éƒ½ä¼š<strong><em>ä½¿ç”¨ Checksum æ¥æ£€æŸ¥è‡ªå·±ä¿å­˜çš„æ•°æ®</em></strong>æ˜¯å¦æŸåã€‚ä¸é€‰æ‹©é€šè¿‡å…¶ä»– Chunk å‰¯æœ¬æ¥æ¯”è¾ƒæ£€æŸ¥çš„åŸå› ï¼š</p>

<ul>
  <li>è·¨è¶Š Chunk Server æ¯”è¾ƒå‰¯æœ¬æ¥æ£€æŸ¥æ•°æ®æ˜¯å¦æŸåå¾ˆä¸å®é™…</li>
  <li>GFS å…è®¸æœ‰æ­§ä¹‰çš„ Chunk å‰¯æœ¬å­˜åœ¨ï¼›Chunk åœ¨è¿›è¡ŒåŸå­è¿½åŠ æ—¶ï¼Œä¸èƒ½ä¿è¯ Byte çº§åˆ«çš„ä¸€è‡´æ€§ï¼Œå› æ­¤å„ä¸ª Chunk å‰¯æœ¬å¯èƒ½ä¼šä¸ä¸€è‡´</li>
</ul>

<p>æ¯ä¸ª Chunk è¢«åˆ’åˆ†ä¸º 64KB çš„å—ï¼Œæ¯ä¸ªå—éƒ½å¯¹åº”ä¸€ä¸ª 32 ä½çš„ Checksumï¼ˆä¿å­˜åœ¨å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿè®°å½•åœ¨æ“ä½œæ—¥å¿—ä¸­ï¼‰ã€‚åœ¨å°† Chunk æ•°æ®è¿”å›ç»™ Client æˆ–è€…å…¶ä»– Chunk Server ä¹‹å‰ï¼Œéƒ½ä¼šæ ¹æ® Checksum æ ¡éªŒæ•°æ®æ˜¯å¦æ­£ç¡®ã€‚</p>

<p>å¦‚æœæŸä¸€å—æ•°æ®é”™è¯¯ï¼Œåˆ™è¿”å›å¼‚å¸¸ï¼Œå¹¶å°†è¿™ä¸ªé”™è¯¯ä¸ŠæŠ¥åˆ° Masterã€‚æ”¶åˆ°é”™è¯¯ä¹‹åï¼Œ<strong>*Client æˆ–è€…å…¶ä»– Chunk Server ä¼šä»å…¶ä»–å‰¯æœ¬è¯»å–æ•°æ®ï¼›Master ä¼šä»å…¶ä»– Chunk å‰¯æœ¬å…‹éš†æ•°æ®è¿›è¡Œæ¢å¤*</strong>ã€‚</p>

<blockquote>
  <p>å½“ Chunk å‰¯æœ¬æ¢å¤ä¹‹åï¼Œ<em>Master ä¼šé€šçŸ¥å‰¯æœ¬é”™è¯¯çš„ Chunk Server åˆ é™¤æ‰é”™è¯¯å‰¯æœ¬</em></p>
</blockquote>

<p>åœ¨ Chunk Server è´Ÿè½½è¾ƒä½çš„æ—¶å€™ï¼Œå®ƒä¼šå®šæœŸæ‰«æ &amp; æ£€éªŒæ¯ä¸ªä¸æ´»è·ƒçš„ Chunk å‰¯æœ¬çš„å†…å®¹ã€‚ä¸€æ—¦å‘ç°å­˜åœ¨æŸåçš„ Chunkï¼Œå°±ä¼šä¸ŠæŠ¥ç»™ Masterï¼›ä»è€Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œæ­£ç¡®çš„ Chunk å‰¯æœ¬ï¼›ä¹‹åå†æŠŠæŸåçš„æ•°æ®åˆ é™¤ã€‚</p>

<blockquote>
  <p>Checksum åœ¨ Chunk Server çš„ç£ç›˜ä¸­ä¿å­˜ï¼›åŒæ—¶ä¹Ÿä¼šä¿å­˜æ¯ä¸ª Chunk çš„æœ€æ–°ç‰ˆæœ¬å·</p>
</blockquote>

<h1 id="6-conclusions">6-Conclusions</h1>

<p>GFS è®¾è®¡æ€è·¯ä¸­ï¼Œç»„ä»¶å¤±æ•ˆæ˜¯å¸¸æ€ï¼›å¤§æ–‡ä»¶å†™å…¥é‡‡ç”¨ Append çš„æ–¹å¼ä¼˜åŒ–æ€§èƒ½ï¼›é€šè¿‡æŒç»­ç›‘æ§ï¼Œå¤åˆ¶å…³é”®æ•°æ®ï¼Œå¿«é€Ÿå’Œè‡ªåŠ¨æ¢å¤æä¾›ç¾éš¾å†—ä½™ã€‚</p>

<p>GFS å¹¶æ²¡æœ‰åœ¨æ–‡ä»¶ç³»ç»Ÿå±‚é¢æä¾›ä»»ä½• Cache æœºåˆ¶ï¼Œå› ä¸º Client å‡ ä¹ä¸ä¼šé‡å¤è¯»å–æ•°æ®ï¼Œå…¶è¯»å–æ–¹å¼è¦ä¹ˆæ˜¯æµå¼çš„è¯»å–ä¸€ä¸ªå¤§å‹çš„æ•°æ®é›†ï¼Œè¦ä¹ˆæ˜¯åœ¨å¤§å‹çš„æ•°æ®é›†ä¸­éšæœº Seek åˆ°æŸä¸ªä½ç½®ï¼Œä¹‹åæ¯æ¬¡è¯»å–å°‘é‡çš„æ•°æ®ã€‚</p>

<p>åˆ†å¸ƒå¼æ–‡ä»¶ç®¡ç†æ–¹é¢ï¼Œå¹¶æ²¡æœ‰é‡‡ç”¨ä¸€è‡´æ€§ç®—æ³•æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸­å¿ƒèŠ‚ç‚¹çš„æ–¹å¼ï¼Œè¿™æ ·ç®€åŒ–äº†è®¾è®¡ï¼Œæé«˜å¯é æ€§ï¼Œå¯æ‰©å±•æ€§ã€‚</p>

<p>ä¸ºäº†å®ç°å¤§é‡çš„å¹¶å‘è¯»å†™æ“ä½œä»èƒ½å¤Ÿæä¾›å¾ˆé«˜çš„ååé‡ï¼Œé‡‡ç”¨æ§åˆ¶æµä¸æ•°æ®æµåˆ†ç¦»çš„è®¾è®¡æ–¹æ¡ˆã€‚æ§åˆ¶æµåœ¨ Master å¤„ç†ï¼Œæ•°æ®æµåœ¨ Client ä¸ Chunk Server ä¸­å¤„ç†ã€‚ä¸ºäº†é™ä½ Master çš„è´Ÿè½½ï¼Œé€‰æ‹©äº†è¾ƒå¤§å°ºå¯¸çš„ Chunkï¼›åŒæ—¶ï¼Œé€šè¿‡ Lease æœºåˆ¶é€‰æ‹© Chunk ä¸»å‰¯æœ¬ï¼Œä»è€Œå°†æ§åˆ¶æƒä» Master è½¬ç§»åˆ°ä¸» Chunk Server ä¸­ã€‚</p>

      <div class="c-article__footer u-clearfix">
        <div class="c-article__tag">
          
        </div>
        <div class="c-article__share">
          <a href="https://twitter.com/intent/tweet?text=Google%20File%20System&url=kkzhang-tt.github.io/2021/07/29/gfs/" title="Share
          on Twitter" rel="nofollow" target="_blank"><div data-icon='ei-sc-twitter' data-size='s'></div></a>
          <a href="https://facebook.com/sharer.php?u=kkzhang-tt.github.io/2021/07/29/gfs/" title="Share on Facebook" rel="nofollow" target="_blank"><div data-icon='ei-sc-facebook' data-size='s'></div></a>
        </div>
      </div>
      <div class="c-newsletter">
  <div class="c-newsletter__header">
    <h4 class="c-newsletter__title">Newsletter</h4>
    <div class="c-newsletter__subtitle">Subscribe to this blog and receive notifications of new posts by email.</div>
  </div>
  <form class="c-newsletter-form validate" action="#" method="POST" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
    <div class="c-newsletter-form__group">
      <label class="u-screen-reader-text" for="mce-EMAIL">Email address</label>
      <input class="c-newsletter__email required email" id="mce-EMAIL" type="email" name="EMAIL" placeholder="Your email address" autocomplete="on">
      <input class="c-newsletter__button" id="mc-embedded-subscribe" type="submit" name="subscribe" value="Subscribe">
    </div>
  </form>
</div> <!-- /.c-newsletter -->
      <div class="c-recent-post">
        <h4 class="c-recent__title">You might also enjoy</h4>
        <div class="c-recent__box">
        
        
          <div class="c-recent__item">
            <a class="c-recent__image" href="/2021/10/15/verb-infinitive/" style="background-image: url( /images/nce/nce_3.jpg)"></a>
            <div class="c-recent__footer">
              <h4><a href="/2021/10/15/verb-infinitive/">åŠ¨è¯ä¸å®šå¼</a></h4>
              <div class="c-recent__date">
                <time datetime="2021-10-15T00:00:00+08:00">October 15, 2021</time>
              </div>
            </div>
          </div>
        
        
        
          <div class="c-recent__item">
            <a class="c-recent__image" href="/2021/10/13/non-predicate-verb/" style="background-image: url( /images/nce/nce_2.jpg)"></a>
            <div class="c-recent__footer">
              <h4><a href="/2021/10/13/non-predicate-verb/">éè°“è¯­åŠ¨è¯</a></h4>
              <div class="c-recent__date">
                <time datetime="2021-10-13T00:00:00+08:00">October 13, 2021</time>
              </div>
            </div>
          </div>
        
        
        
          <div class="c-recent__item">
            <a class="c-recent__image" href="/2021/08/08/principles-of-economics-1/" style="background-image: url( /images/economics/economics_1.png)"></a>
            <div class="c-recent__footer">
              <h4><a href="/2021/08/08/principles-of-economics-1/">ç»æµå­¦åå¤§åŸç†</a></h4>
              <div class="c-recent__date">
                <time datetime="2021-08-08T00:00:00+08:00">August 8, 2021</time>
              </div>
            </div>
          </div>
        
        
        
          <div class="c-recent__item">
            <a class="c-recent__image" href="/2021/07/11/ddia-8/" style="background-image: url( /images/ddia/ddia_8_1.png)"></a>
            <div class="c-recent__footer">
              <h4><a href="/2021/07/11/ddia-8/">DDIA: æ•°æ®åˆ†åŒº</a></h4>
              <div class="c-recent__date">
                <time datetime="2021-07-11T00:00:00+08:00">July 11, 2021</time>
              </div>
            </div>
          </div>
        
        
        </div>
      </div> <!-- /.c-recent-post -->
      
    </div> <!-- /.c-wrap-content -->
  </div> <!-- /.c-article__content -->
</article> <!-- /.c-article-page -->

</main> <!-- /.c-content -->
  </div> <!-- /.o-wrapper -->
  <div class="c-top" data-icon='ei-chevron-up' data-size='s' title="Scroll To Top"></div> <!-- /.c-top -->
  <script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/evil-icons.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script src="/js/simple-jekyll-search.min.js"></script>
<script src="/js/main.js"></script>
<!-- /javascripts -->
</body>
</html>